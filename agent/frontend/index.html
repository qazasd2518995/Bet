<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰ª£ÁêÜÁÆ°ÁêÜÁ≥ªÁªü</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="./css/main.css">
    <style>
        /* Èò≤Ê≠¢VueÊ®°ÊùøÈñÉÁèæ */
        [v-cloak] {
            display: none !important;
        }
        
        /* Âä†ËºâÈÅÆÁΩ©Â±§ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            color: white;
            transition: opacity 0.3s ease-in-out;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* È©óË≠âÁ¢ºÊ®£Âºè */
        .captcha-group {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .captcha-input {
            flex: 1;
        }

        .captcha-display {
            width: 120px;
            height: 38px;
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
            border: 1px solid #ced4da;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: bold;
            color: #495057;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .captcha-display:hover {
            background: linear-gradient(45deg, #e9ecef, #dee2e6);
            border-color: #adb5bd;
            transform: translateY(-1px);
        }

        .refresh-btn {
            padding: 6px 12px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .refresh-btn:hover {
            transform: translateY(-1px);
        }
        
        /* Âü∫Êú¨Ê®£Âºè */
        body {
            font-family: 'Microsoft JhengHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #f8f9fa;
        }
        /* ... ÂÖ∂‰ªñÁèæÊúâÊ®£Âºè ... */

        /* Ê∑ªÂä†ÁêÉÂè∑È°èËâ≤Ë¶èÂâá */
        .number-ball {
            width: 28px; /* Ê†πÊìöÈúÄË¶ÅË∞ÉÊï¥Â§ßÂ∞è */
            height: 28px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px; /* Ê†πÊìöÈúÄË¶ÅË∞ÉÊï¥Â§ßÂ∞è */
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
            margin: 0 2px; /* Ê∑ªÂä†‰∏Ä‰∫õÈñìË∑ù */
            color: #fff; /* È†êË®≠ÊñáÂ≠óÈ°èËâ≤ */
        }

        /* ËàáÊ∏∏ÊàèÂâçÁ´Ø‰∏ÄËá¥ÁöÑÈ°èËâ≤ */
        .color-1 { background-color: #ffcc00; color: #000; } /* ÈáëÈªÉËâ≤ */
        .color-2 { background-color: #3399ff; color: #fff; } /* ÈÆÆËóçËâ≤ */
        .color-3 { background-color: #777777; color: #fff; } /* Ê∑±ÁÅ∞Ëâ≤ */
        .color-4 { background-color: #ff9933; color: #fff; } /* Ê©ôËâ≤ */
        .color-5 { background-color: #00ccff; color: #fff; } /* Â§©ËóçËâ≤ */
        .color-6 { background-color: #9966cc; color: #fff; } /* Á¥´Ëâ≤ */
        .color-7 { background-color: #aaaaaa; color: #fff; } /* ÁÅ∞Ëâ≤ */
        .color-8 { background-color: #ff3333; color: #fff; } /* Á¥ÖËâ≤ */
        .color-9 { background-color: #990000; color: #fff; } /* Ê∑±Á¥ÖËâ≤ */
        .color-10 { background-color: #33cc33; color: #fff; } /* Á∂†Ëâ≤ */
    </style>
</head>
<body>
    <!-- ÂàùÂßãÂä†ËºâÈÅÆÁΩ©Â±§ -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <h4>‰ª£ÁêÜÁÆ°ÁêÜÁ≥ªÁµ±</h4>
        <p>Ê≠£Âú®ËºâÂÖ•‰∏≠...</p>
    </div>
    
    <div id="app" v-cloak>
        <!-- ÁôªÂΩïÈ†ÅÈù¢ -->
        <div v-if="!isLoggedIn" class="container login-container">
            <div class="row justify-content-center">
                <div class="col-md-6 col-lg-5">
                    <div class="card shadow">
                        <div class="card-header bg-primary text-white">
                            <h3 class="text-center mb-0">‰ª£ÁêÜÁÆ°ÁêÜÁ≥ªÁªü</h3>
                        </div>
                        <div class="card-body">
                            <form @submit.prevent="login">
                                <div class="form-group mb-3">
                                    <label for="username">Áî®Êà∂Âêç</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                                        <input type="text" id="username" v-model="loginForm.username" class="form-control" placeholder="ËØ∑ËæìÂÖ•Áî®Êà∂Âêç" required>
                                    </div>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="password">ÂØÜÁ¢º</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                        <input type="password" id="password" v-model="loginForm.password" class="form-control" placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ¢º" required>
                                    </div>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="captcha">È©óË≠âÁ¢º</label>
                                    <div class="captcha-group">
                                        <input 
                                            type="text" 
                                            id="captcha" 
                                            v-model="loginForm.captcha"
                                            class="form-control captcha-input" 
                                            placeholder="ËØ∑ËæìÂÖ•È©óË≠âÁ¢º"
                                            required
                                            maxlength="4"
                                            style="text-transform: uppercase;"
                                        >
                                        <div class="captcha-display" id="captchaDisplay" @click="refreshCaptcha">
                                            {{ currentCaptcha }}
                                        </div>
                                        <button type="button" class="btn btn-outline-primary refresh-btn" @click="refreshCaptcha" title="ÈáçÊñ∞Êï¥ÁêÜÈ©óË≠âÁ¢º">
                                            üîÑ
                                        </button>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="remember">
                                        <label class="form-check-label" for="remember">Ë®ò‰ΩèÊàë</label>
                                    </div>
                                    <button type="submit" class="btn btn-primary" :disabled="loading">
                                        <span v-if="loading" class="spinner-border spinner-border-sm" role="status"></span>
                                        ÁôªÂΩï
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰∏ªÈ†ÅÈù¢ -->
        <div v-else>
            <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">‰ª£ÁêÜÁÆ°ÁêÜÁ≥ªÁªü</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" :class="{active: activeTab === 'dashboard'}" href="#" @click="setActiveTab('dashboard')">ÂÑÄË°®Êùø</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" :class="{active: activeTab === 'accounts'}" href="#" @click="setActiveTab('accounts')">Â∏≥ËôüÁÆ°ÁêÜ</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" :class="{active: activeTab === 'reports'}" href="#" @click="setActiveTab('reports')">Â†±Ë°®Êü•Ë©¢</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" :class="{active: activeTab === 'transactions'}" href="#" @click="setActiveTab('transactions')">‰∫§ÊòìËÆ∞ÂΩï</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" :class="{active: activeTab === 'draw'}" href="#" @click="setActiveTab('draw')">ÂºÄÂ•ñËÆ∞ÂΩï</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" :class="{active: activeTab === 'notices'}" href="#" @click="setActiveTab('notices')">Á≥ªÁªüÂÖ¨Âëä</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" :class="{active: activeTab === 'login-logs'}" href="#" @click="setActiveTab('login-logs')">ÁôªÈåÑÊó•Ë™å</a>
                            </li>
                            <li class="nav-item" v-if="user.level === 0">
                                <a class="nav-link" :class="{active: activeTab === 'customer-service'}" href="#" @click="setActiveTab('customer-service')">ÂÆ¢ÊúçÂäüËÉΩ</a>
                            </li>
                        </ul>
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item me-3">
                                <a class="nav-link">
                                    <i class="fas fa-wallet me-1"></i>È¢ùÂ∫¶: {{ formatMoney(user.balance) }}
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-user-circle me-1"></i>{{ user.username }}
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" href="#" @click.prevent="showProfileModal()">
                                        <i class="fas fa-user-edit me-2"></i>‰∏™‰∫∫ËµÑÊñô
                                    </a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="#" @click="logout">
                                        <i class="fas fa-sign-out-alt me-2"></i>ÁôªÂá∫
                                    </a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- ÂÖ®ÂüüÊñ∞Â¢û‰ºöÂëòÊ®°ÊÖãÊ°Ü - ‰∏çÂèóÈ†ÅÁ±§ÈôêÂà∂Ôºå‰ªª‰ΩïÈ†ÅÈù¢ÈÉΩÂèØ‰ª•‰ΩøÁî®ÔºåÂè™Âú®ÁôªÂΩïÂæåÈ°ØÁ§∫ -->
            <div id="createMemberModal" v-if="showCreateMemberModal && isLoggedIn && user && user.id && modalSystemReady" 
                 style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.85); z-index: 99999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(3px);">
                
                <!-- Ê®°ÊÖãÊ°Ü‰∏ªÈ´î -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 3px; border-radius: 15px; box-shadow: 0 20px 50px rgba(0,0,0,0.4); max-width: 500px; width: 90%; max-height: 90vh; overflow: auto;">
                    <div style="background: white; border-radius: 12px; overflow: hidden;">
                        
                        <!-- Ê®°ÊÖãÊ°ÜÊ®ôÈ°å -->
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; position: relative;">
                            <h4 style="margin: 0; font-weight: 600; text-align: center;">
                                <i class="fas fa-user-plus me-2"></i>
                                {{ (currentManagingAgent && currentManagingAgent.id === user.id) || !currentManagingAgent ? 'Êñ∞Â¢û‰ºöÂëò' : 'ÁÇ∫ ' + (currentManagingAgent ? currentManagingAgent.username : '') + ' Êñ∞Â¢û‰ºöÂëò' }}
                            </h4>
                            <button type="button" @click="hideCreateMemberModal" 
                                    style="position: absolute; top: 15px; right: 15px; background: rgba(255,255,255,0.2); border: none; color: white; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;"
                                    onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                                    onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <!-- Ê®°ÊÖãÊ°ÜÂÖßÂÆπ -->
                        <div style="padding: 30px;">
                            <!-- ‰ª£ÁêÜ‰ø°ÊÅØÈ°ØÁ§∫ -->
                            <div v-if="currentManagingAgent" style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 25px; border-left: 4px solid #667eea;">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-crown me-2 text-warning"></i>
                                    <span class="fw-bold">‰ª£ÁêÜ:</span>
                                    <span class="ms-2 text-primary fw-bold">{{ currentManagingAgent.username }}</span>
                                    <span class="badge bg-info ms-2">{{ getLevelName(currentManagingAgent.level || 1) }}</span>
                                </div>
                            </div>
                            
                            <!-- Ë°®ÂñÆ -->
                            <form @submit.prevent="createMember">
                                <div class="mb-4">
                                    <label class="form-label fw-bold">
                                        <i class="fas fa-user me-1 text-primary"></i>Áî®Êà∂Âêç
                                    </label>
                                    <input type="text" class="form-control form-control-lg" 
                                           v-model="newMember.username" 
                                           placeholder="ËØ∑ËæìÂÖ•‰ºöÂëòÁî®Êà∂Âêç" 
                                           style="border-radius: 8px; border: 2px solid #e9ecef; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 0.2rem rgba(102, 126, 234, 0.25)'"
                                           onblur="this.style.borderColor='#e9ecef'; this.style.boxShadow='none'"
                                           required>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label fw-bold">
                                        <i class="fas fa-lock me-1 text-primary"></i>ÂØÜÁ¢º
                                    </label>
                                    <input type="password" class="form-control form-control-lg" 
                                           v-model="newMember.password" 
                                           placeholder="ËØ∑ËæìÂÖ•ÂØÜÁ¢º" 
                                           style="border-radius: 8px; border: 2px solid #e9ecef; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 0.2rem rgba(102, 126, 234, 0.25)'"
                                           onblur="this.style.borderColor='#e9ecef'; this.style.boxShadow='none'"
                                           required>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label fw-bold">
                                        <i class="fas fa-lock me-1 text-primary"></i>Á°ÆËÆ§ÂØÜÁ¢º
                                    </label>
                                    <input type="password" class="form-control form-control-lg" 
                                           v-model="newMember.confirmPassword" 
                                           placeholder="ËØ∑ÂÜçÊ¨°ËæìÂÖ•ÂØÜÁ¢º" 
                                           style="border-radius: 8px; border: 2px solid #e9ecef; transition: all 0.2s;"
                                           onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 0.2rem rgba(102, 126, 234, 0.25)'"
                                           onblur="this.style.borderColor='#e9ecef'; this.style.boxShadow='none'"
                                           required>
                                </div>
                                
                                <div class="mb-4">
                                    <label class="form-label fw-bold">
                                        <i class="fas fa-sticky-note me-1 text-primary"></i>ÂÇôË®ªË™™Êòé
                                    </label>
                                    <textarea class="form-control form-control-lg" 
                                              v-model="newMember.notes" 
                                              placeholder="Ë´ãËº∏ÂÖ•ÊúÉÂì°ÂÇôË®ªË™™ÊòéÔºàÈÅ∏Â°´Ôºâ" 
                                              rows="3"
                                              style="border-radius: 8px; border: 2px solid #e9ecef; transition: all 0.2s; resize: vertical;"
                                              onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 0.2rem rgba(102, 126, 234, 0.25)'"
                                              onblur="this.style.borderColor='#e9ecef'; this.style.boxShadow='none'"></textarea>
                                    <small class="form-text text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        ÂèØÁî®ÊñºË®òÈåÑÊúÉÂì°ÁöÑÁâπÊÆäÊÉÖÊ≥Å„ÄÅËÅØÁπ´ÊñπÂºè„ÄÅÂÇôÂøò‰∫ãÈ†ÖÁ≠â
                                    </small>
                                </div>
                                
                                <!-- ÊåâÈàïÂçÄÂüü -->
                                <div class="d-flex justify-content-end gap-3 mt-4">
                                    <button type="button" class="btn btn-outline-secondary btn-lg px-4" 
                                            @click="hideCreateMemberModal"
                                            style="border-radius: 8px; font-weight: 500;">
                                        <i class="fas fa-times me-1"></i>ÂèñÊ∂à
                                    </button>
                                    <button type="submit" class="btn btn-lg px-4" 
                                            :disabled="loading"
                                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; border-radius: 8px; font-weight: 500; min-width: 120px;">
                                        <span v-if="loading" class="spinner-border spinner-border-sm me-2" role="status"></span>
                                        <i v-else class="fas fa-plus me-1"></i>
                                        {{ loading ? 'Âª∫Á´ã‰∏≠...' : 'Âª∫Á´ã‰ºöÂëò' }}
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container-fluid mt-3">
                <!-- ÂÑÄË°®Êùø -->
                <div v-if="activeTab === 'dashboard'">
                    <h2>ÂÑÄË°®Êùø</h2>
                    <!-- Á¨¨‰∏ÄÊéíÂç°Áâá - 4ÂÄã‰∏ªË¶ÅÊåáÊ®ô -->
                    <div class="row mt-4">
                        <div class="col-md-3 mb-4">
                            <div class="card bg-primary text-white">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h5 class="card-title mb-1">ÊàëÁöÑÁÇπÊï∞‰ΩôÈ¢ù</h5>
                                            <h2 class="card-text mb-0">{{ formatMoney(user.balance) }}</h2>
                                        </div>
                                        <i class="fas fa-wallet fa-2x opacity-75"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h5 class="card-title mb-1">Á∏Ω‰ºöÂëòÊï∏</h5>
                                            <h2 class="card-text mb-0">{{ dashboardData.memberCount }}</h2>
                                        </div>
                                        <i class="fas fa-users fa-2x opacity-75"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-info text-white">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h5 class="card-title mb-1">‰ªäÊó•ÊäïÊ≥®È°ç</h5>
                                            <h2 class="card-text mb-0">{{ formatMoney(dashboardData.totalTransactions) }}</h2>
                                        </div>
                                        <i class="fas fa-chart-line fa-2x opacity-75"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-warning text-white">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h5 class="card-title mb-1">‰∏ãÁ¥ö‰ª£ÁêÜÊï∏</h5>
                                            <h2 class="card-text mb-0">{{ dashboardData.subAgentsCount }}</h2>
                                        </div>
                                        <i class="fas fa-sitemap fa-2x opacity-75"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Á¨¨‰∫åÊéíÂç°Áâá - Ë©≥Á¥∞ÁªüËÆ° -->
                    <div class="row">
                        <div class="col-md-3 mb-4">
                            <div class="card bg-light border-start border-primary border-4">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="text-muted mb-1">Ê¥ªË∫ç‰ºöÂëò</h6>
                                            <h4 class="text-primary mb-0">{{ dashboardData.activeMembers }}</h4>
                                        </div>
                                        <i class="fas fa-user-check fa-lg text-primary"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-light border-start border-success border-4">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                                                        <h6 class="text-muted mb-1">‰ª£ÁêÜÁõàÂà©</h6>
                            <h4 class="text-success mb-0">{{ formatMoney(dashboardData.totalDeposit) }}</h4>
                                        </div>
                                        <i class="fas fa-arrow-up fa-lg text-success"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-light border-start border-danger border-4">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                                                        <h6 class="text-muted mb-1">‰ª£ÁêÜ‰∫èÊçü</h6>
                            <h4 class="text-danger mb-0">{{ formatMoney(dashboardData.totalWithdraw) }}</h4>
                                        </div>
                                
                                        <i class="fas fa-arrow-down fa-lg text-danger"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card bg-light border-start border-info border-4">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="text-muted mb-1">‰ªäÊó•Ê∑®Êî∂Áõä</h6>
                                            <h4 class="mb-0" :class="dashboardData.totalRevenue >= 0 ? 'text-success' : 'text-danger'">
                                                {{ formatMoney(dashboardData.totalRevenue) }}
                                            </h4>
                                        </div>
                                        <i class="fas fa-coins fa-lg text-info"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Á¨¨‰∏âÊéí - ÂúñË°®ÂíåÂÖ¨Âëä -->
                    <div class="row">
                        <div class="col-md-8 mb-4">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">ËøëÊúü‰∫§ÊòìË∂®Âã¢</h5>
                                    <small class="text-muted">ÈÅéÂéª7Â§©Êï∏Êìö</small>
                                </div>
                                <div class="card-body">
                                    <canvas id="transactionChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card h-100">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Á≥ªÁªüÂÖ¨Âëä</h5>
                                    <button class="btn btn-sm btn-outline-primary" @click="setActiveTab('notices')">
                                        Êü•ÁúãÂÖ®ÈÉ®
                                    </button>
                                </div>
                                <div class="card-body p-0" style="max-height: 300px; overflow-y: auto;">
                                    <div v-if="notices.length === 0" class="p-3 text-center text-muted">
                                        <i class="fas fa-bullhorn fa-2x mb-2"></i>
                                        <div>Êö´ÁÑ°ÂÖ¨Âëä</div>
                                    </div>
                                    <div v-for="notice in notices.slice(0, 5)" :key="notice.id" class="border-bottom p-3">
                                        <div class="d-flex justify-content-between align-items-start">
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">{{ notice.title }}</h6>
                                                <p class="mb-1 text-muted small">{{ notice.content.substring(0, 50) }}...</p>
                                                <small class="text-muted">{{ formatDate(notice.created_at) }}</small>
                                            </div>
                                            <span class="badge" :class="{
                                                'bg-primary': notice.category === 'ÊúÄÊñ∞ÂÖ¨Âëä',
                                                'bg-warning': notice.category === 'Á∂≠‰øÆ',
                                                'bg-success': notice.category === 'Ê¥ªÂãï'
                                            }">{{ notice.category }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Á¨¨ÂõõÊéí - Âø´Êç∑Êìç‰Ωú -->
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Âø´Êç∑Êìç‰Ωú</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <button class="btn btn-outline-primary w-100" @click="setActiveTab('accounts')">
                                                <i class="fas fa-users-cog mb-1"></i><br>
                                                <small>Â∏≥ËôüÁÆ°ÁêÜ</small>
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button class="btn btn-outline-info w-100" @click="setActiveTab('transactions')">
                                                <i class="fas fa-exchange-alt mb-1"></i><br>
                                                <small>‰∫§ÊòìËÆ∞ÂΩï</small>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Á≥ªÁªüÁãÄÊÖã</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <div class="text-success">
                                                <i class="fas fa-server fa-2x mb-2"></i>
                                                <div>Á≥ªÁªüÊ≠£Â∏∏</div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="text-primary">
                                                <i class="fas fa-database fa-2x mb-2"></i>
                                                <div>Êï∏ÊìöÂêåÊ≠•</div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div class="text-info">
                                                <i class="fas fa-wifi fa-2x mb-2"></i>
                                                <div>ËøûÁ∫øÁ©©ÂÆö</div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="text-center">
                                        <small class="text-muted">
                                            ÊúÄÂêéÊõ¥Êñ∞Ôºö{{ new Date().toLocaleString() }}
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÁôªÈåÑÊó•Ë™åÈ†ÅÈù¢ -->
                <div v-if="activeTab === 'login-logs'">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2>ÁôªÈåÑÊó•Ë™å</h2>
                        <button class="btn btn-primary" @click="loadLoginLogs()">
                            <i class="fas fa-sync me-1"></i>Âà∑Êñ∞Êó•Ë™å
                        </button>
                    </div>

                    <!-- ÊôÇÈñìÁØÑÂúçÈÅ∏ÊìáÂô® -->
                    <div class="card mb-4">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">Ë´ãÈÅ∏ÊìáËµ∑Ê≠¢ÊôÇÈñì</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">ÈñãÂßãÊôÇÈñì</label>
                                    <input type="date" class="form-control" v-model="loginLogFilters.startDate">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">ÁµêÊùüÊôÇÈñì</label>
                                    <input type="date" class="form-control" v-model="loginLogFilters.endDate">
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-12">
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" @click="setLoginLogDateRange('today')">‰ªäÊó•</button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm" @click="setLoginLogDateRange('yesterday')">Êò®Êó•</button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm" @click="setLoginLogDateRange('week')">Êú¨ÈÄ±</button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm" @click="setLoginLogDateRange('7days')">ÊúÄËøë7Â§©</button>
                                        <button type="button" class="btn btn-primary btn-sm" @click="searchLoginLogs()">Êü•Ë©¢</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÁôªÈåÑÊó•Ë™åÊï∏ÊìöË°®Ê†º -->
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">ÁôªÈåÑË®òÈåÑ</h5>
                            <span class="badge bg-secondary">ÂÖ± {{ loginLogs.length }} Á≠ÜË®òÈåÑ</span>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead style="background-color: #2c3e50;">
                                        <tr>
                                            <th style="width: 80px; color: white; font-weight: bold; background-color: #2c3e50;">NO.</th>
                                            <th style="width: 150px; color: white; font-weight: bold; background-color: #2c3e50;">Áî®Êà∂Âêç</th>
                                            <th style="width: 180px; color: white; font-weight: bold; background-color: #2c3e50;">ÁôªÈåÑÊôÇÈñì</th>
                                            <th style="width: 150px; color: white; font-weight: bold; background-color: #2c3e50;">IP</th>
                                            <th style="color: white; font-weight: bold; background-color: #2c3e50;">IPÊ≠∏Â±¨Âú∞</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="(log, index) in paginatedLoginLogs" :key="log.id" class="align-middle">
                                            <td>{{ (loginLogPagination.currentPage - 1) * loginLogPagination.limit + index + 1 }}</td>
                                            <td><strong>{{ log.username || currentUsername }}</strong></td>
                                            <td>{{ formatLoginDateTime(log.login_time) }}</td>
                                            <td><span class="font-monospace">{{ formatIPAddress(log.ip_address) }}</span></td>
                                            <td>{{ log.ip_location || 'Êú™Áü•‰ΩçÁΩÆ' }}</td>
                                        </tr>
                                        <tr v-if="loginLogs.length === 0">
                                            <td colspan="5" class="text-center text-muted py-4">
                                                Êö´ÁÑ°ÁôªÈåÑË®òÈåÑ
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- ÂàÜÈ†ÅÊéßÂà∂ -->
                            <div v-if="loginLogPagination.totalPages > 1" class="d-flex justify-content-between align-items-center mt-3">
                                <div class="text-muted">
                                    È°ØÁ§∫Á¨¨ {{ (loginLogPagination.currentPage - 1) * loginLogPagination.limit + 1 }} - 
                                    {{ Math.min(loginLogPagination.currentPage * loginLogPagination.limit, loginLogs.length) }} Á≠ÜÔºå
                                    ÂÖ± {{ loginLogs.length }} Á≠ÜË®òÈåÑ
                                </div>
                                <nav aria-label="ÁôªÈåÑÊó•Ë™åÂàÜÈ†Å">
                                    <ul class="pagination pagination-sm mb-0">
                                        <li class="page-item" :class="{disabled: loginLogPagination.currentPage === 1}">
                                            <a class="page-link" href="#" @click.prevent="changeLoginLogPage(loginLogPagination.currentPage - 1)">
                                                <i class="fas fa-chevron-left"></i>
                                            </a>
                                        </li>
                                        <li v-for="page in getLoginLogPageRange()" :key="page" 
                                            class="page-item" :class="{active: page === loginLogPagination.currentPage}">
                                            <a class="page-link" href="#" @click.prevent="changeLoginLogPage(page)">{{ page }}</a>
                                        </li>
                                        <li class="page-item" :class="{disabled: loginLogPagination.currentPage === loginLogPagination.totalPages}">
                                            <a class="page-link" href="#" @click.prevent="changeLoginLogPage(loginLogPagination.currentPage + 1)">
                                                <i class="fas fa-chevron-right"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>

                    <!-- Ê≥®ÊÑè‰∫ãÈ†Ö -->
                    <div class="alert alert-info mt-4" role="alert">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Ê≥®ÊÑèÔºö</strong>ÁôªÈåÑÊó•Ë™åÊúÄÂ∞ëË¢´‰øùÁïô7Â§©ÔºåË∂ÖÈÅé7Â§©ÈÉ®ÂàÜÊúÄÂ§ö‰øùÁïôÊúÄÂæå20Á≠Ü„ÄÇ
                    </div>
                </div>

                <!-- Â∏≥ËôüÁÆ°ÁêÜ (Âêà‰Ωµ‰ª£ÁêÜÁÆ°ÁêÜÂíåÊúÉÂì°ÁÆ°ÁêÜ) -->
                <div v-if="activeTab === 'accounts'">
                    <!-- Èù¢ÂåÖÂ±ëÂ∞éËà™ -->
                    <nav v-if="memberBreadcrumb.length > 0" aria-label="Â∏≥ËôüÁÆ°ÁêÜÂ±§Á¥öÂ∞éËà™">
                        <ol class="breadcrumb mb-3 bg-light p-2 rounded">
                            <li class="breadcrumb-item">
                                <button class="btn btn-link p-0 text-decoration-none" @click="memberBreadcrumb = []; loadHierarchicalMembers()">
                                    <i class="fas fa-home me-1"></i>Ê†πÂ±§Á¥ö ({{ user.username }})
                                </button>
                            </li>
                            <li v-for="(item, index) in memberBreadcrumb" :key="index" 
                                class="breadcrumb-item"
                                :class="{ 'active': index === memberBreadcrumb.length - 1 }">
                                <span v-if="index === memberBreadcrumb.length - 1" class="fw-bold">
                                    {{ item.username }} ({{ item.level }})
                                </span>
                                <button v-else class="btn btn-link p-0 text-decoration-none" 
                                        @click="memberBreadcrumb.splice(index + 1); goBackToMemberLevel(item)">
                                    {{ item.username }} ({{ item.level }})
                                </button>
                            </li>
                            <li v-if="memberBreadcrumb.length > 0" class="breadcrumb-item ms-auto">
                                <button class="btn btn-sm btn-outline-secondary" @click="goBackToParentMember()">
                                    <i class="fas fa-arrow-left me-1"></i>ËøîÂõû‰∏äÁ¥ö
                                </button>
                            </li>
                        </ol>
                    </nav>

                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>
                            <i class="fas fa-users-cog me-2"></i>Â∏≥ËôüÁÆ°ÁêÜ
                        </h2>
                        <div class="d-flex gap-2 align-items-center">
                            <span class="badge bg-info d-flex align-items-center justify-content-center" style="height: 32px; padding: 8px 12px;">
                                ÂÖ± {{ hierarchicalMembers ? hierarchicalMembers.length : 0 }} ÂÄã‰∏ãÁ¥ö
                                ({{ memberHierarchyStats.agentCount || 0 }}‰ª£ÁêÜ + {{ memberHierarchyStats.memberCount || 0 }}ÊúÉÂì°)
                            </span>
                            <button class="btn btn-primary me-2" @click="quickCreateMember">
                                <i class="fas fa-user-plus me-1"></i>Êñ∞Â¢ûÊúÉÂì°
                            </button>
                            <button v-if="(currentMemberManagingAgent ? currentMemberManagingAgent.level : (currentManagingAgent ? currentManagingAgent.level : user.level)) < 15" 
                                    class="btn btn-success me-2" @click="showAgentModal">
                                <i class="fas fa-plus me-1"></i>Êñ∞Â¢û‰ª£ÁêÜ
                            </button>
                            <button class="btn btn-outline-primary" @click="refreshHierarchicalMembers()">
                                <i class="fas fa-sync me-1"></i>Âà∑Êñ∞
                            </button>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            ÊêúÁ¥¢Ê¢ù‰ª∂
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label class="form-label">ÁãÄÊÖã</label>
                                    <select class="form-select" v-model="memberFilters.status" @change="loadHierarchicalMembers">
                                        <option value="-1">ÂÖ®ÈÉ®</option>
                                        <option value="1">ÂêØÁî®</option>
                                        <option value="0">ÂÅúÁî®</option>
                                        <option value="2">ÂáçÁµê</option>
                                    </select>
                                </div>
                                <div class="col-md-5">
                                    <label class="form-label">ÂÖ≥ÈîÆÂ≠ó</label>
                                    <input type="text" class="form-control" placeholder="Áî®Êà∂Âêç/ID" v-model="memberFilters.keyword" @keyup.enter="loadHierarchicalMembers">
                                </div>
                                <div class="col-md-4 d-flex align-items-end">
                                    <button class="btn btn-primary" @click="loadHierarchicalMembers">ÊêúÁ¥¢</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover align-middle">
                                    <thead>
                                        <tr>
                                            <th>Á¥öÂà•</th>
                                            <th>ID</th>
                                            <th>Áî®Êà∂Âêç</th>
                                            <th>È§òÈ°ç</th>
                                            <th>ÂÇôË®ª</th>
                                            <th>ÁãÄÊÖã</th>
                                            <th>ÂâµÂª∫ÊôÇÈñì</th>
                                            <th>Êìç‰Ωú</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-if="hierarchicalMembers.length === 0">
                                            <td colspan="8" class="text-center text-muted py-4">
                                                <i class="fas fa-inbox fa-2x mb-2 d-block"></i>
                                                Ê≤íÊúâË≥áÊñô
                                            </td>
                                        </tr>
                                        <tr v-for="item in hierarchicalMembers" :key="item.id">
                                            <td>
                                                <span class="badge" :class="item.userType === 'agent' ? 'bg-primary' : 'bg-success'">
                                                    {{ item.userType === 'agent' ? (item.level == 0 ? 'Á∏Ω‰ª£ÁêÜ' : getLevelName(item.level)) : 'ÊúÉÂì°' }}
                                                </span>
                                            </td>
                                            <td>{{ item.id }}</td>
                                            <td>
                                                <!-- Â¶ÇÊûúÊòØ‰ª£ÁêÜ‰∏îÁ¥öÂà•Â∞èÊñº15ÔºåÈ°ØÁ§∫ÁÇ∫ÂèØÈªûÊìä -->
                                                <div v-if="item.userType === 'agent' && parseInt(item.level) < 15" class="d-flex align-items-center">
                                                    <button class="btn btn-link p-0 text-decoration-none fw-bold text-primary" 
                                                            @click="enterAgentMemberManagement(item)">
                                                        {{ item.username }}
                                                        <i class="fas fa-chevron-right ms-1 small"></i>
                                                    </button>
                                                </div>
                                                <!-- 15Á¥ö‰ª£ÁêÜÊàñÊúÉÂì°È°ØÁ§∫ÁÇ∫ÊôÆÈÄöÊñáÂ≠ó -->
                                                <div v-else class="d-flex align-items-center">
                                                    <span class="fw-bold" :class="item.userType === 'agent' ? 'text-primary' : 'text-success'">
                                                        {{ item.username }}
                                                    </span>
                                                    <span v-if="item.userType === 'agent' && parseInt(item.level) >= 15" class="text-muted small ms-2">
                                                        (ÊúÄÂ§ßÂ±§Á¥öÔºåÂè™ËÉΩÂâµÂª∫ÊúÉÂì°)
                                                    </span>
                                                </div>
                                            </td>
                                            <td>{{ formatMoney(item.balance) }}</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <span v-if="item.notes" class="text-truncate" style="max-width: 150px;" :title="item.notes">
                                                        {{ item.notes }}
                                                    </span>
                                                    <span v-else class="text-muted fst-italic">ÁÑ°ÂÇôË®ª</span>
                                                    <button class="btn btn-sm btn-outline-secondary ms-2" 
                                                            @click="item.userType === 'agent' ? editAgentNotes(item) : editMemberNotes(item)" 
                                                            :title="item.notes ? 'Á∑®ËºØÂÇôË®ª' : 'Êñ∞Â¢ûÂÇôË®ª'">
                                                        <i class="fas fa-edit"></i>
                                                    </button>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="badge" :class="getStatusBadgeClass(item.status)">
                                                    {{ getStatusText(item.status) }}
                                                </span>
                                            </td>
                                            <td>{{ formatDate(item.created_at) }}</td>
                                            <td>
                                                <div class="btn-group btn-group-sm">
                                                    <button class="btn btn-outline-primary" 
                                                            @click="item.userType === 'agent' ? adjustAgentBalance(item) : adjustMemberBalance(item)">
                                                        <i class="fas fa-exchange-alt me-1"></i>ÈªûÊï∏ËΩâÁßª
                                                    </button>
                                                    <!-- ‰ª£ÁêÜÁç®ÊúâÔºöÈÄÄÊ∞¥Ë®≠ÂÆö -->
                                                    <button v-if="item.userType === 'agent'" class="btn btn-outline-info" @click="showRebateSettingsModal(item)">
                                                        <i class="fas fa-percent me-1"></i>ÈÄÄÊ∞¥Ë®≠ÂÆö
                                                    </button>
                                                    <!-- ÊúÉÂì°Áç®ÊúâÔºöË™øÊï¥ÈôêÁ¥Ö -->
                                                    <button v-if="item.userType === 'member'" class="btn btn-outline-info" @click="adjustMemberBettingLimit(item)">
                                                        <i class="fas fa-sliders-h me-1"></i>Ë™øÊï¥ÈôêÁ¥Ö
                                                    </button>
                                                    <button class="btn btn-outline-warning" 
                                                            @click="item.userType === 'agent' ? resetAgentPassword(item) : resetMemberPassword(item)">
                                                        <i class="fas fa-key me-1"></i>ÈáçË®≠ÂØÜÁ¢º
                                                    </button>
                                                    <div class="btn-group">
                                                        <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle" 
                                                                data-bs-toggle="dropdown" aria-expanded="false">
                                                            <i class="fas fa-cog me-1"></i>ÁãÄÊÖã
                                                        </button>
                                                        <ul class="dropdown-menu">
                                                            <li v-if="item.status !== 1">
                                                                <a class="dropdown-item" href="#" 
                                                                   @click.prevent="item.userType === 'agent' ? changeAgentStatus(item, 1) : changeMemberStatus(item, 1)">
                                                                    <i class="fas fa-check text-success me-2"></i>Ë®≠ÁÇ∫ÂêØÁî®
                                                                </a>
                                                            </li>
                                                            <li v-if="item.status !== 0">
                                                                <a class="dropdown-item" href="#" 
                                                                   @click.prevent="item.userType === 'agent' ? changeAgentStatus(item, 0) : changeMemberStatus(item, 0)">
                                                                    <i class="fas fa-ban text-secondary me-2"></i>Ë®≠ÁÇ∫ÂÅúÁî®
                                                                </a>
                                                            </li>
                                                            <li v-if="item.status !== 2">
                                                                <a class="dropdown-item" href="#" 
                                                                   @click.prevent="item.userType === 'agent' ? changeAgentStatus(item, 2) : changeMemberStatus(item, 2)">
                                                                    <i class="fas fa-snowflake text-warning me-2"></i>Ë®≠ÁÇ∫ÂáçÁµê
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <button class="btn btn-outline-danger" 
                                                            @click="item.userType === 'agent' ? deleteAgent(item.id, item.username) : deleteMember(item.id, item.username)">
                                                        <i class="fas fa-trash-alt me-1"></i>Âà†Èô§
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div v-if="hierarchicalMembers.length === 0" class="text-center py-4">
                                <i class="fas fa-users-slash fa-3x text-muted mb-3"></i>
                                <p class="text-muted">ÁõÆÂâçÊ≤íÊúâ‰∏ãÁ¥öÂ∏≥Ëôü</p>
                                <div>
                                    <button class="btn btn-primary me-2" @click="quickCreateMember">
                                        <i class="fas fa-user-plus me-1"></i>Êñ∞Â¢ûÊúÉÂì°
                                    </button>
                                    <button v-if="(currentMemberManagingAgent ? currentMemberManagingAgent.level : (currentManagingAgent ? currentManagingAgent.level : user.level)) < 15" 
                                            class="btn btn-success" @click="showAgentModal">
                                        <i class="fas fa-plus me-1"></i>Êñ∞Â¢û‰ª£ÁêÜ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Êñ∞Â¢û‰ª£ÁêÜ Modal -->
                    <div class="modal" id="createAgentModal" tabindex="-1" v-if="showCreateAgentModal">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Êñ∞Â¢û‰ª£ÁêÜ</h5>
                                    <button type="button" class="btn-close" @click="hideCreateAgentModal"></button>
                                </div>
                                <div class="modal-body">
                                    <form @submit.prevent="createAgent">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label">Áî®Êà∂Âêç</label>
                                                    <input type="text" class="form-control" v-model="newAgent.username" required>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label">ÂØÜÁ¢º</label>
                                                    <input type="password" class="form-control" v-model="newAgent.password" required>
                                                </div>
                                <div class="mb-3">
                                    <label class="form-label">‰ª£ÁêÜÁ∫ßÂà´</label>
                                    <input type="text" class="form-control" 
                                           :value="getNextLevelName()" 
                                           readonly disabled>
                                    <small class="form-text text-muted">ÊÇ®Âè™ËÉΩÂàõÂª∫ÊØîÁõÆÂâçÂ±ÇÁ∫ß‰Ωé‰∏ÄÁ¥öÁöÑ‰ª£ÁêÜ</small>
                                </div>

                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label">Áõ§Âè£È°ûÂûã</label>
                                                    <div class="form-control-plaintext bg-light border rounded p-2">
                                                        <i class="fas fa-info-circle text-info me-2"></i>
                                                        <strong>{{ getMarketInfo((currentMemberManagingAgent && currentMemberManagingAgent.market_type ? currentMemberManagingAgent.market_type : (currentManagingAgent.market_type || user.market_type)) || 'D').name }}</strong>
                                                        <small class="text-muted ms-2">({{ getMarketInfo((currentMemberManagingAgent && currentMemberManagingAgent.market_type ? currentMemberManagingAgent.market_type : (currentManagingAgent.market_type || user.market_type)) || 'D').description }})</small>
                                                    </div>
                                                    <small class="form-text text-muted">
                                                        <i class="fas fa-arrow-down me-1"></i>
                                                        Áõ§Âè£È°ûÂûãËá™ÂãïÁπºÊâøËá™ {{ (currentMemberManagingAgent && currentMemberManagingAgent.username ? currentMemberManagingAgent.username : currentManagingAgent.username) }}ÔºåÁÑ°ÈúÄÈÅ∏Êìá
                                                    </small>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label">ÈÄÄÊ∞¥Ê®°Âºè</label>
                                                    <select class="form-select" v-model="newAgent.rebate_mode" required>
                                                        <option value="all">ÂÖ®ÊãøÈÄÄÊ∞¥ÔºàÊú¨‰ª£ÁêÜÊãøËµ∞ÊâÄÊúâÈÄÄÊ∞¥Ôºâ</option>
                                                        <option value="percentage">ÊåâÊØî‰æãÂàÜÈÖçÔºàÂàÜÈÖçÁµ¶‰∏ãÁ¥ö‰ª£ÁêÜË®≠ÂÆöÊØî‰æãÔºâ</option>
                                                        <option value="none">ÂÖ®ÈÄÄ‰∏ãÁ¥öÔºàÊú¨‰ª£ÁêÜ‰∏çÊãøÔºåÂÖ®Áµ¶‰∏ãÁ¥ö‰ª£ÁêÜÔºâ</option>
                                                    </select>
                                                    <small class="form-text text-muted">ÈÄÄÊ∞¥ÂàÜÈÖçÊñπÂºè</small>
                                                </div>
                                                <div class="mb-3" v-if="newAgent.rebate_mode === 'percentage'">
                                                    <label class="form-label">ÈÄÄÊ∞¥ÊØî‰æã (%)</label>
                                                    <input type="number" class="form-control" v-model="newAgent.rebate_percentage" 
                                                           step="0.01" min="0" :max="availableMaxRebatePercentage * 100" required>
                                                    <small class="form-text text-muted">
                                                        ÂèØËÆæÂÆöËåÉÂõ¥Ôºö0% - {{ (availableMaxRebatePercentage * 100).toFixed(1) }}% (Áõ¥Â±¨‰∏äÁ¥ö‰ª£ÁêÜÂàÜÈÖçÈ°çÂ∫¶)
                                                    </small>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label">ÂÇôË®ªË™™Êòé</label>
                                                    <textarea class="form-control" v-model="newAgent.notes" 
                                                              placeholder="Ë´ãËº∏ÂÖ•‰ª£ÁêÜÂÇôË®ªË™™ÊòéÔºàÈÅ∏Â°´Ôºâ" rows="3"></textarea>
                                                    <small class="form-text text-muted">ÂèØÁî®ÊñºË®òÈåÑ‰ª£ÁêÜÁöÑÁâπÊÆäÊÉÖÊ≥Å„ÄÅËÅØÁπ´ÊñπÂºèÁ≠â</small>
                                                </div>
                                                <div class="card bg-light">
                                                    <div class="card-header">
                                                        <h6 class="mb-0">ÈÄÄÊ∞¥ËØ¥Êòé</h6>
                                                    </div>
                                                    <div class="card-body">
                                                        <ul class="mb-0 small">
                                                            <li><strong>ÂÖ®ÊãøÊâÄÊúâÈÄÄÊ∞¥Ôºö</strong>Ë©≤‰ª£ÁêÜËé∑ÂæóÊâÄÊúâÂèØÂæóÈÄÄÊ∞¥ ({{ (availableMaxRebatePercentage * 100).toFixed(1) }}%)</li>
                                                            <li><strong>ËÆæÂÆöÂÖ∑È´îÊØî‰æãÔºö</strong>ÂàÜÈÖçÁµ¶‰∏ãÁ¥ö‰ª£ÁêÜÊåáÂÆöÊØî‰æãÁöÑÈÄÄÊ∞¥</li>
                                                            <li><strong>ÂÖ®ÈÄÄÁµ¶‰∏ãÁ¥öÔºö</strong>Ë©≤‰ª£ÁêÜ‰∏çËé∑ÂæóÈÄÄÊ∞¥ÔºåÂÖ®ÈÉ®Áµ¶‰∏ãÁ¥ö‰ª£ÁêÜ</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <input type="hidden" v-model="newAgent.parent">

                                        <div class="text-end">
                                            <button type="button" class="btn btn-secondary me-2" @click="hideCreateAgentModal">ÂèñÊ∂à</button>
                                            <button type="submit" class="btn btn-primary" :disabled="loading">
                                                <span v-if="loading" class="spinner-border spinner-border-sm" role="status"></span>
                                                Âª∫Á´ã
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÈÄÄÊ∞¥ËÆæÂÆö Modal -->
                    <div class="modal" id="rebateSettingsModal" tabindex="-1" v-if="showRebateModal">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">ÈÄÄÊ∞¥ËÆæÂÆö - {{ rebateAgent.username }}</h5>
                                    <button type="button" class="btn-close" @click="hideRebateSettingsModal"></button>
                                </div>
                                <div class="modal-body">
                                    <form @submit.prevent="updateRebateSettings">
                                        <div class="mb-3">
                                            <label class="form-label">ÈÄÄÊ∞¥Ê®°Âºè</label>
                                            <select class="form-select" v-model="rebateSettings.rebate_mode" required>
                                                <option value="all">ÂÖ®ÊãøÈÄÄÊ∞¥</option>
                                                <option value="percentage">ÊåâÊØî‰æãÂàÜÈÖç</option>
                                                <option value="none">ÂÖ®ÈÄÄ‰∏ãÁ¥ö</option>
                                            </select>
                                        </div>
                                        <div class="mb-3" v-if="rebateSettings.rebate_mode === 'percentage'">
                                            <label class="form-label">ÈÄÄÊ∞¥ÊØî‰æã (%)</label>
                                            <input type="number" class="form-control" v-model="rebateSettings.rebate_percentage" 
                                                   step="0.01" min="0" :max="availableMaxRebatePercentage * 100" required>
                                            <small class="form-text text-muted">
                                                ÂèØËÆæÂÆöËåÉÂõ¥Ôºö0% - {{ (availableMaxRebatePercentage * 100).toFixed(1) }}% (Áõ¥Â±¨‰∏äÁ¥ö‰ª£ÁêÜÂàÜÈÖçÈ°çÂ∫¶)
                                            </small>
                                        </div>
                                        <div class="alert alert-info">
                                            <h6>ÁõÆÂâçËÆæÂÆöÔºö</h6>
                                            <p class="mb-0">
                                                {{ getRebateModeText(rebateSettings.rebate_mode) }}
                                                {{ rebateSettings.rebate_mode === 'percentage' ? ` ${rebateSettings.rebate_percentage}%` : '' }}
                                            </p>
                                        </div>
                                        <div class="text-end">
                                            <button type="button" class="btn btn-secondary me-2" @click="hideRebateSettingsModal">ÂèñÊ∂à</button>
                                            <button type="submit" class="btn btn-primary" :disabled="loading">
                                                <span v-if="loading" class="spinner-border spinner-border-sm" role="status"></span>
                                                Êõ¥Êñ∞
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Á∑®ËºØ‰ª£ÁêÜÂÇôË®ª Modal -->
                    <div class="modal fade" id="editAgentNotesModal" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">
                                        <i class="fas fa-sticky-note me-2 text-primary"></i>
                                        Á∑®ËºØ‰ª£ÁêÜÂÇôË®ª - {{ editNotesData.username }}
                                    </h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <form @submit.prevent="updateAgentNotes">
                                        <div class="mb-3">
                                            <label class="form-label">‰ª£ÁêÜË≥áË®ä</label>
                                            <div class="p-3 bg-light rounded">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <strong>‰ª£ÁêÜID:</strong> {{ editNotesData.id }}
                                                    </div>
                                                    <div class="col-6">
                                                        <strong>Áî®Êà∂Âêç:</strong> {{ editNotesData.username }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">ÂÇôË®ªË™™Êòé</label>
                                            <textarea class="form-control" v-model="editNotesData.notes" 
                                                      placeholder="Ë´ãËº∏ÂÖ•‰ª£ÁêÜÂÇôË®ªË™™Êòé" rows="5" 
                                                      style="resize: vertical;"></textarea>
                                            <small class="form-text text-muted">
                                                ÂèØÁî®ÊñºË®òÈåÑ‰ª£ÁêÜÁöÑÁâπÊÆäÊÉÖÊ≥Å„ÄÅËÅØÁπ´ÊñπÂºè„ÄÅÈáçË¶ÅÊèêÈÜíÁ≠â
                                            </small>
                                        </div>
                                        <div class="text-end">
                                            <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                                            <button type="submit" class="btn btn-primary" :disabled="loading">
                                                <span v-if="loading" class="spinner-border spinner-border-sm me-2" role="status"></span>
                                                <i v-else class="fas fa-save me-1"></i>
                                                {{ loading ? 'ÂÑ≤Â≠ò‰∏≠...' : 'ÂÑ≤Â≠òÂÇôË®ª' }}
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>


                    
                    <!-- ÁºñËæë‰ª£ÁêÜ Modal -->
                    <div class="modal" id="editAgentModal" tabindex="-1" v-if="showEditAgentModal">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">ÁºñËæë‰ª£ÁêÜ</h5>
                                    <button type="button" class="btn-close" @click="hideEditAgentModal"></button>
                                </div>
                                <div class="modal-body">
                                    <form @submit.prevent="updateAgent">
                                        <div class="mb-3">
                                            <label class="form-label">‰ª£ÁêÜID</label>
                                            <input type="text" class="form-control" v-model="editAgentData.id" readonly>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Áî®Êà∂Âêç</label>
                                            <input type="text" class="form-control" v-model="editAgentData.username" readonly>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">‰øÆÊîπÂØÜÁ¢º (ÁïôÁ©∫Ë°®Á§∫‰∏ç‰øÆÊîπ)</label>
                                            <input type="password" class="form-control" v-model="editAgentData.password">
                                        </div>

                                        <div class="mb-3">
                                            <label class="form-label">ÁãÄÊÖã</label>
                                            <select class="form-select" v-model="editAgentData.status">
                                                <option value="1">ÂêØÁî®</option>
                                                <option value="0">ÂÅúÁî®</option>
                                                <option value="2">ÂáçÁµê</option>
                                            </select>
                                        </div>
                                        <div class="text-end">
                                            <button type="button" class="btn btn-secondary me-2" @click="hideEditAgentModal">ÂèñÊ∂à</button>
                                            <button type="submit" class="btn btn-primary" :disabled="loading">
                                                <span v-if="loading" class="spinner-border spinner-border-sm" role="status"></span>
                                                Êõ¥Êñ∞
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Â†±Ë°®Êü•Ë©¢È†ÅÈù¢ -->
                <div v-if="activeTab === 'reports'">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2>
                            <i class="fas fa-chart-bar me-2 text-primary"></i>Â†±Ë°®Êü•Ë©¢
                        </h2>
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-primary" @click="exportReport()">
                                <i class="fas fa-download me-1"></i>ÂåØÂá∫Â†±Ë°®
                            </button>
                            <button class="btn btn-primary" @click="searchReports()">
                                <i class="fas fa-search me-1"></i>Êü•Ë©¢
                            </button>
                        </div>
                    </div>

                    <!-- Êü•Ë©¢Ê¢ù‰ª∂ÂçÄÂüü -->
                    <div class="card mb-4">
                        <div class="card-header bg-light">
                            <h5 class="mb-0">
                                <i class="fas fa-filter me-2"></i>Êü•Ë©¢Ê¢ù‰ª∂
                            </h5>
                        </div>
                        <div class="card-body">
                            <!-- Á¨¨‰∏ÄË°åÔºöÊôÇÈñìÁØÑÂúç -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">ÊôÇÈñìÁØÑÂúç</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="fas fa-calendar-alt"></i>
                                        </span>
                                        <input type="date" class="form-control" v-model="reportFilters.startDate" placeholder="ÈñãÂßãÊó•Êúü">
                                        <span class="input-group-text">Ëá≥</span>
                                        <input type="date" class="form-control" v-model="reportFilters.endDate" placeholder="ÁµêÊùüÊó•Êúü">
                                    </div>
                                    <small class="text-muted">È†êË®≠Êü•Ë©¢‰ªäÊó•Â†±Ë°® {{ getCurrentDateText() }}</small>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">Âø´ÈÄüÊü•Ë©¢</label>
                                    <div class="btn-group w-100" role="group">
                                        <button type="button" class="btn btn-outline-primary" @click="setDateRange('today')">‰ªäÊó•</button>
                                        <button type="button" class="btn btn-outline-primary" @click="setDateRange('yesterday')">Êò®Êó•</button>
                                        <button type="button" class="btn btn-outline-primary" @click="setDateRange('week')">Êú¨ÈÄ±</button>
                                        <button type="button" class="btn btn-outline-primary" @click="setDateRange('month')">Êú¨Êúà</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Á¨¨‰∫åË°åÔºöÈÅäÊà≤È°ûÂûãÁØ©ÈÅ∏ -->
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <label class="form-label fw-bold">ÈÅäÊà≤È°ûÂûã</label>
                                    <div class="d-flex flex-wrap gap-2">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="gamePK10" v-model="reportFilters.gameTypes.pk10" checked disabled>
                                            <label class="form-check-label fw-bold" for="gamePK10">Ê•µÈÄüË≥ΩËªä</label>
                                        </div>
                                    </div>
                                    <small class="text-muted">ÁõÆÂâçÂÉÖÊîØÊè¥Ê•µÈÄüË≥ΩËªäÈÅäÊà≤</small>
                                </div>
                            </div>

                            <!-- Á¨¨‰∏âË°åÔºöÁµêÁÆóÁãÄÊÖãÂíåÁî®Êà∂ÁØ©ÈÅ∏ -->
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">ÁµêÁÆóÁãÄÊÖã</label>
                                    <div class="d-flex gap-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="settlementStatus" id="statusAll" value="" v-model="reportFilters.settlementStatus">
                                            <label class="form-check-label" for="statusAll">ÂÖ®ÈÉ®</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="settlementStatus" id="statusSettled" value="settled" v-model="reportFilters.settlementStatus">
                                            <label class="form-check-label" for="statusSettled">Â∑≤ÁµêÁÆó</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="settlementStatus" id="statusUnsettled" value="unsettled" v-model="reportFilters.settlementStatus">
                                            <label class="form-check-label" for="statusUnsettled">Êú™ÁµêÁÆó</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">Áî®Êà∂ÁØ©ÈÅ∏</label>
                                    <input type="text" class="form-control" v-model="reportFilters.username" placeholder="Ëº∏ÂÖ•ÊúÉÂì°Áî®Êà∂ÂêçÊàñ‰ª£ÁêÜÁî®Êà∂Âêç">
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- ‰ª£ÁêÜÂ±§Á¥öÂàÜÊûêÂ†±Ë°® -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h5 class="mb-0">
                                    <i class="fas fa-sitemap me-2"></i>‰ª£ÁêÜÂ±§Á¥öÂàÜÊûêÂ†±Ë°®
                                </h5>
                                <div class="d-flex gap-2 align-items-center">
                                    <span v-if="reportData.agentInfo" class="badge bg-info d-flex align-items-center justify-content-center" style="height: 32px; padding: 8px 12px;">
                                        ÂÖ± {{ reportData.reportData ? reportData.reportData.length : 0 }} ÂÄã‰∏ãÁ¥ö
                                        ({{ reportData.agentInfo.agentCount || 0 }}‰ª£ÁêÜ + {{ reportData.agentInfo.memberCount || 0 }}ÊúÉÂì°)
                                    </span>
                                    <span v-else class="badge bg-secondary d-flex align-items-center justify-content-center" style="height: 32px; padding: 8px 12px;">ÂÖ± {{ reportData.reportData ? reportData.reportData.length : 0 }} ÂÄã‰∏ãÁ¥ö</span>
                                    <button class="btn btn-sm btn-outline-primary" @click="refreshReportData()">
                                        <i class="fas fa-sync me-1"></i>Âà∑Êñ∞
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Èù¢ÂåÖÂ±ëÂ∞éËà™ -->
                            <nav v-if="reportBreadcrumb.length > 0" aria-label="Â†±Ë°®Â±§Á¥öÂ∞éËà™">
                                <ol class="breadcrumb mb-0 bg-light p-2 rounded">
                                    <li class="breadcrumb-item">
                                        <button class="btn btn-link p-0 text-decoration-none" @click="reportBreadcrumb = []; searchReports()">
                                            <i class="fas fa-home me-1"></i>Ê†πÂ†±Ë°®
                                        </button>
                                    </li>
                                    <li v-for="(item, index) in reportBreadcrumb" :key="index" 
                                        class="breadcrumb-item"
                                        :class="{ 'active': index === reportBreadcrumb.length - 1 }">
                                        <span v-if="index === reportBreadcrumb.length - 1" class="fw-bold">
                                            {{ item.username }} ({{ item.level }})
                                        </span>
                                        <button v-else class="btn btn-link p-0 text-decoration-none" 
                                                @click="reportBreadcrumb.splice(index + 1); goBackToLevel(item)">
                                            {{ item.username }} ({{ item.level }})
                                        </button>
                                    </li>
                                    <li class="breadcrumb-item ms-auto">
                                        <button class="btn btn-sm btn-outline-secondary" @click="goBackToParentReport()">
                                            <i class="fas fa-arrow-left me-1"></i>ËøîÂõû‰∏äÁ¥ö
                                        </button>
                                    </li>
                                </ol>
                            </nav>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive" style="font-size: 12px;">
                                <table class="table table-bordered table-sm">
                                    <thead>
                                        <!-- Á¨¨‰∏ÄË°åÔºöÂàÜÁµÑÊ®ôÈ°å -->
                                        <tr style="background-color: #2c3e50;">
                                            <th rowspan="2" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; vertical-align: middle; min-width: 80px;">Á¥öÂà•</th>
                                            <th rowspan="2" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; vertical-align: middle; min-width: 120px;">Áî®Êà∂Âêç</th>
                                            <th rowspan="2" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; vertical-align: middle; min-width: 80px;">È§òÈ°ç</th>
                                            <th rowspan="2" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; vertical-align: middle; min-width: 60px;">Á≠ÜÊï∏</th>
                                            <th rowspan="2" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; vertical-align: middle; min-width: 80px;">‰∏ãÊ≥®ÈáëÈ°ç</th>
                                            <th rowspan="2" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; vertical-align: middle; min-width: 80px;">ÊúâÊïàÈáëÈ°ç</th>
                                            <th colspan="3" style="color: white; font-weight: bold; background-color: #34495e; text-align: center; border-bottom: 2px solid #95a5a6;">ÊúÉÂì°Ëº∏Ë¥è</th>
                                            <th colspan="6" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; border-bottom: 2px solid #95a5a6;">{{ reportBreadcrumb.length > 0 ? reportBreadcrumb[reportBreadcrumb.length - 1].level : getLevelName(user?.level) || 'Á∏Ω‰ª£ÁêÜ' }}</th>
                                            <th rowspan="2" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; vertical-align: middle; min-width: 80px;">‰∏ä‰∫§Ë≤®Èáè</th>
                                            <th rowspan="2" style="color: white; font-weight: bold; background-color: #2c3e50; text-align: center; vertical-align: middle; min-width: 80px;">‰∏äÁ¥ö‰∫§Êî∂</th>
                                        </tr>
                                        <!-- Á¨¨‰∫åË°åÔºöÁ¥∞È†ÖÊ®ôÈ°å -->
                                        <tr style="background-color: #34495e;">
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 80px;">Ëº∏Ë¥è</th>
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 60px;">ÈÄÄÊ∞¥</th>
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 80px;">ÁõàËôßÁµêÊûú</th>
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 80px;">ÊáâÊî∂‰∏ãÁ∑ö</th>
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 50px;">‰ΩîÊàê</th>
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 80px;">‰ΩîÊàêÈáëÈ°ç</th>
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 80px;">‰ΩîÊàêÁµêÊûú</th>
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 60px;">Ë≥∫Ê∞¥</th>
                                            <th style="color: white; font-weight: bold; background-color: #34495e; text-align: center; min-width: 80px;">ÁõàËôßÁµêÊûú</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Áµ±‰∏ÄÁöÑ‰ª£ÁêÜ+ÊúÉÂì°ÂàóË°® -->
                                        <tr v-for="item in reportData.reportData" :key="item.username">
                                            <!-- Á¥öÂà• -->
                                            <td class="text-center">
                                                <span class="badge" :class="item.userType === 'agent' ? 'bg-primary' : 'bg-success'">
                                                    {{ item.level || 'ÊúÉÂì°' }}
                                                </span>
                                            </td>
                                            <!-- Áî®Êà∂Âêç -->
                                            <td class="text-center">
                                                <!-- Â¶ÇÊûúÊòØ‰ª£ÁêÜ‰∏îÊúâ‰∏ãÁ¥öÔºåÈ°ØÁ§∫ÁÇ∫ÂèØÈªûÊìä -->
                                                <div v-if="item.userType === 'agent' && item.hasDownline" class="d-flex align-items-center justify-content-center">
                                                    <button class="btn btn-link p-0 text-decoration-none fw-bold text-primary" 
                                                            @click="enterAgentReport(item)">
                                                        {{ item.username }}
                                                        <i class="fas fa-chevron-right ms-1 small"></i>
                                                    </button>
                                                </div>
                                                <!-- Â¶ÇÊûúÊòØÊúÉÂì°‰∏îÊúâ‰∏ãÊ≥®Ë®òÈåÑÔºåÈ°ØÁ§∫ÁÇ∫ÂèØÈªûÊìäÊü•ÁúãÊ≥®ÂñÆË©≥ÊÉÖ -->
                                                <div v-else-if="item.userType === 'member' && item.betCount > 0" class="d-flex align-items-center justify-content-center">
                                                    <button class="btn btn-link p-0 text-decoration-none fw-bold text-success" 
                                                            @click="showMemberBetDetails(item)" 
                                                            title="ÈªûÊìäÊü•ÁúãÊ≥®ÂñÆË©≥ÊÉÖ">
                                                        {{ item.username }}
                                                        <i class="fas fa-list-alt ms-1 small"></i>
                                                    </button>
                                                </div>
                                                <!-- ÂÖ∂‰ªñÊÉÖÊ≥ÅÈ°ØÁ§∫ÁÇ∫ÊôÆÈÄöÊñáÂ≠ó -->
                                                <div v-else class="d-flex align-items-center justify-content-center">
                                                    <span class="fw-bold" :class="item.userType === 'agent' ? 'text-primary' : 'text-success'">
                                                        {{ item.username }}
                                                    </span>
                                                </div>
                                            </td>
                                            <!-- È§òÈ°ç -->
                                            <td class="text-end">{{ formatMoney(item.balance || 0) }}</td>
                                            <!-- Á≠ÜÊï∏ -->
                                            <td class="text-center">{{ item.betCount || 0 }}</td>
                                            <!-- ‰∏ãÊ≥®ÈáëÈ°ç -->
                                            <td class="text-end">{{ formatMoney(item.betAmount) }}</td>
                                            <!-- ÊúâÊïàÈáëÈ°ç -->
                                            <td class="text-end">{{ formatMoney(item.validAmount) }}</td>
                                            <!-- ÊúÉÂì°Ëº∏Ë¥èÔºöËº∏Ë¥è (ÂØ¶ÈöõÊúÉÂì°Ëº∏Ë¥èÔºå‰∏çÂèñÂèç) -->
                                            <td class="text-end" :class="getProfitClass(item.memberWinLoss)">
                                                {{ formatProfit(item.memberWinLoss) }}
                                            </td>
                                            <!-- ÊúÉÂì°Ëº∏Ë¥èÔºöÈÄÄÊ∞¥ (ÊúÉÂì°Ê≤íÊúâÁõ¥Êé•ÈÄÄÊ∞¥ÔºåÊáâË©≤ÊòØ0) -->
                                            <td class="text-end">0.00</td>
                                            <!-- ÊúÉÂì°Ëº∏Ë¥èÔºöÁõàËôßÁµêÊûú (ËàáËº∏Ë¥è‰∏ÄÊ®£ÔºåÊúÉÂì°ËßíÂ∫¶) -->
                                            <td class="text-end" :class="getProfitClass(item.memberWinLoss)">
                                                {{ formatProfit(item.memberWinLoss) }}
                                            </td>
                                            <!-- ‰ª£ÁêÜÔºöÊáâÊî∂‰∏ãÁ∑ö (ËàáÊúÉÂì°ÁõàËôßÁµêÊûú‰∏ÄÊ®£ÔºåÊúÉÂì°ËßíÂ∫¶) -->
                                            <td class="text-end" :class="getProfitClass(item.memberWinLoss)">
                                                {{ formatProfit(item.memberWinLoss) }}
                                            </td>
                                            <!-- ‰ª£ÁêÜÔºö‰ΩîÊàê -->
                                            <td class="text-center">0%</td>
                                            <!-- ‰ª£ÁêÜÔºö‰ΩîÊàêÈáëÈ°ç -->
                                            <td class="text-end">0.00</td>
                                            <!-- ‰ª£ÁêÜÔºö‰ΩîÊàêÁµêÊûú -->
                                            <td class="text-end">0.00</td>
                                            <!-- ‰ª£ÁêÜÔºöË≥∫Ê∞¥ -->
                                            <td class="text-end" :class="getProfitClass(item.rebateProfit)">
                                                {{ formatProfit(item.rebateProfit) }}
                                            </td>
                                            <!-- ‰ª£ÁêÜÔºöÁõàËôßÁµêÊûú (ËàáË≥∫Ê∞¥‰∏ÄÊ®£) -->
                                            <td class="text-end" :class="getProfitClass(item.rebateProfit)">
                                                {{ formatProfit(item.rebateProfit) }}
                                            </td>
                                            <!-- ‰∏ä‰∫§Ë≤®Èáè (Á≠âÊñºÊúâÊïàÈáëÈ°ç) -->
                                            <td class="text-end">{{ formatMoney(item.validAmount) }}</td>
                                            <!-- ‰∏äÁ¥ö‰∫§Êî∂ = ÊáâÊî∂‰∏ãÁ∑ö + Ë≥∫Ê∞¥ -->
                                            <td class="text-end" :class="getProfitClass(item.memberWinLoss + item.rebateProfit)">
                                                {{ formatProfit(item.memberWinLoss + item.rebateProfit) }}
                                            </td>
                                        </tr>
                                        
                                        <!-- Á∏ΩË®àË°å -->
                                        <tr v-if="reportData.reportData && reportData.reportData.length > 0" class="fw-bold" style="background-color: #e8f5e9; border-top: 2px solid #4caf50;">
                                            <td class="text-center" colspan="2">Á∏ΩË®à</td>
                                            <td class="text-center">-</td>
                                            <td class="text-center">{{ reportData.totalSummary.betCount || 0 }}</td>
                                            <td class="text-end">{{ formatMoney(reportData.totalSummary.betAmount) }}</td>
                                            <td class="text-end">{{ formatMoney(reportData.totalSummary.validAmount) }}</td>
                                            <td class="text-end" :class="getProfitClass(reportData.totalSummary.memberWinLoss)">
                                                {{ formatProfit(reportData.totalSummary.memberWinLoss) }}
                                            </td>
                                            <td class="text-end">0.00</td>
                                            <td class="text-end" :class="getProfitClass(reportData.totalSummary.memberWinLoss)">
                                                {{ formatProfit(reportData.totalSummary.memberWinLoss) }}
                                            </td>
                                            <td class="text-end" :class="getProfitClass(reportData.totalSummary.memberWinLoss)">
                                                {{ formatProfit(reportData.totalSummary.memberWinLoss) }}
                                            </td>
                                            <td class="text-center">0%</td>
                                            <td class="text-end">0.00</td>
                                            <td class="text-end">0.00</td>
                                            <td class="text-end" :class="getProfitClass(reportData.totalSummary.rebateProfit)">
                                                {{ formatProfit(reportData.totalSummary.rebateProfit) }}
                                            </td>
                                            <td class="text-end fw-bold" :class="getProfitClass(reportData.totalSummary.rebateProfit)">
                                                {{ formatProfit(reportData.totalSummary.rebateProfit) }}
                                            </td>
                                            <td class="text-end">{{ formatMoney(reportData.totalSummary.validAmount) }}</td>
                                            <td class="text-end fw-bold" :class="getProfitClass(reportData.totalSummary.memberWinLoss + reportData.totalSummary.rebateProfit)">
                                                {{ formatProfit(reportData.totalSummary.memberWinLoss + reportData.totalSummary.rebateProfit) }}
                                            </td>
                                        </tr>
                                        
                                        <tr v-if="loading">
                                            <td colspan="17" class="text-center text-muted py-4">
                                                <i class="fas fa-spinner fa-spin fa-2x mb-2 d-block"></i>
                                                ËºâÂÖ•‰∏≠...
                                            </td>
                                        </tr>
                                        <tr v-else-if="!reportData.reportData || reportData.reportData.length === 0">
                                            <td colspan="17" class="text-center text-muted py-4">
                                                <i class="fas fa-inbox fa-2x mb-2 d-block"></i>
                                                Ê≤íÊúâË≥áÊñô
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Â†±Ë°®Ë™™Êòé -->
                            <div class="mt-3 p-3 bg-light rounded">
                                <h6 class="mb-2"><i class="fas fa-info-circle me-2"></i>Â†±Ë°®Ë™™Êòé</h6>
                                <div class="row small text-muted">
                                    <div class="col-md-4">
                                        <ul class="mb-0">
                                            <li><strong>Áµ±‰∏ÄÂàóË°®:</strong> È°ØÁ§∫Êú¨Á¥öÂâµÂª∫ÁöÑÊâÄÊúâ‰ª£ÁêÜÂíåÊúÉÂì°</li>
                                            <li><strong>‰ª£ÁêÜ:</strong> ÊúâËóçËâ≤Ê®ôÁ±§ÔºåÂèØÈªûÊìäÈÄ≤ÂÖ•‰∏ãÁ¥ö</li>
                                            <li><strong>ÊúÉÂì°:</strong> ÊúâÁ∂†Ëâ≤Ê®ôÁ±§ÔºåÁõ¥Êé•Áµ±Ë®àÊäïÊ≥®</li>
                                            <li><strong>ÊúÉÂì°Ëº∏Ë¥è:</strong> ÊúÉÂì°ÁöÑÁõàËôßÁãÄÊ≥Å</li>
                                            <li><strong>ÈÄÄÊ∞¥:</strong> ÊúÉÂì°ÈÄÄÊ∞¥ÈáëÈ°ç</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-4">
                                        <ul class="mb-0">
                                            <li><strong>ÁõàËôßÁµêÊûú:</strong> ‰ª£ÁêÜÁöÑÂØ¶ÈöõÁõàËôß</li>
                                            <li><strong>ÂØ¶‰ΩîÈÄÄÊ∞¥:</strong> ÈÄÄÊ∞¥ÂàÜÈÖçÁôæÂàÜÊØî</li>
                                            <li><strong>Ë≥∫Ê∞¥:</strong> ÈÄÄÊ∞¥Âà©ÊΩ§</li>
                                            <li><strong>ÁõàËôßÁµêÊûú:</strong> ÊúÄÁµÇÁõàËôßÔºàÂê´ÈÄÄÊ∞¥Ôºâ</li>
                                            <li><strong>Â±§Á¥öÈëΩÂèñ:</strong> ÈªûÊìä‰ª£ÁêÜÂêçÁ®±Êü•ÁúãÂÖ∂‰∏ãÁ¥ö</li>
                                        </ul>
                                    </div>
                                    <div class="col-md-4">
                                        <ul class="mb-0">
                                            <li><strong>Á∞°ÂåñÈÇèËºØ:</strong> ‰∏çÂàÜÊú¨Á¥ö‰∏ãÁ¥öÔºåÁµ±‰∏ÄÈ°ØÁ§∫</li>
                                            <li><strong>Á∏ΩË®àË®àÁÆó:</strong> ÊâÄÊúâÁõ¥Êé•‰∏ãÁ¥öÁöÑÂä†Á∏Ω</li>
                                            <li><strong>Ê∏ÖÊô∞Â±§Á¥ö:</strong> ÊØèÂÄã‰ª£ÁêÜÁúãÂà∞Ëá™Â∑±ÂâµÂª∫ÁöÑ‰∫∫Âì°</li>
                                            <li><strong>Ê≠£Á¢∫Áµ±Ë®à:</strong> Á∏ΩË®àÂ∞±ÊòØÂØ¶ÈöõÊ•≠Á∏æ</li>
                                            <li><strong>ÁÑ°ÈáçË§áË®àÁÆó:</strong> ÊØèÁ≠ÜÊï∏ÊìöÂè™Ë®àÁÆó‰∏ÄÊ¨°</li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- ‰∫ãÂãôËÆ∞ÂΩïÈ†ÅÈù¢ -->
                <div v-if="activeTab === 'transactions'">
                    <h2>‰∫§ÊòìËÆ∞ÂΩï</h2>
                    
                    <ul class="nav nav-tabs mb-3">
                        <li class="nav-item">
                            <a class="nav-link" :class="{active: transactionTab === 'deposit'}" href="#" @click="transactionTab = 'deposit'; loadDepositRecords()">
                                <i class="fas fa-credit-card me-1"></i>Â≠òÊ¨æËÆ∞ÂΩï
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" :class="{active: transactionTab === 'withdraw'}" href="#" @click="transactionTab = 'withdraw'; loadWithdrawRecords()">
                                <i class="fas fa-money-bill-wave me-1"></i>ÊèêÊ¨æËÆ∞ÂΩï
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" :class="{active: transactionTab === 'rebate'}" href="#" @click="transactionTab = 'rebate'; loadRebateRecords()">
                                <i class="fas fa-gift me-1"></i>ÈÄÄÊ∞¥ËÆ∞ÂΩï
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" :class="{active: transactionTab === 'transfers'}" href="#" @click="loadPointTransfers(); transactionTab = 'transfers'">
                                <i class="fas fa-exchange-alt me-1"></i>ÁÇπÊï∞ËΩ¨ÁßªËÆ∞ÂΩï
                            </a>
                        </li>
                    </ul>
                    
                    <!-- Â≠òÊ¨æËÆ∞ÂΩï -->
                    <div v-if="transactionTab === 'deposit'" class="card">
                        <div class="card-header">
                            Â≠òÊ¨æËÆ∞ÂΩï
                            <div class="float-end">
                                <button class="btn btn-sm btn-outline-primary" @click="loadDepositRecords()">
                                    <i class="fas fa-sync me-1"></i>Âà∑Êñ∞
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th scope="col">Á∑®Âè∑</th>
                                            <th scope="col">Áî®Êà∂È°ûÂûã</th>
                                            <th scope="col">Áî®Êà∂ÂêçÁ®±</th>
                                            <th scope="col">‰∫§ÊòìÈ°ûÂûã</th>
                                            <th scope="col">ÈáëÈ¢ù</th>
                                            <th scope="col">Êìç‰ΩúÂâç‰ΩôÈ¢ù</th>
                                            <th scope="col">Êìç‰ΩúÂæå‰ΩôÈ¢ù</th>
                                            <th scope="col">ËØ¥Êòé</th>
                                            <th scope="col">Êó∂Èó¥</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="record in depositRecords" :key="record.id">
                                            <td>{{ record.id }}</td>
                                            <td>{{ formatUserType(record.user_type) }}</td>
                                            <td>{{ record.username || 'Êú™Áü•Áî®Êà∂' }}</td>
                                            <td>
                                                <span class="badge bg-success">{{ formatTransactionType(record) }}</span>
                                            </td>
                                            <td class="text-success">+{{ formatMoney(Math.abs(record.amount)) }}</td>
                                            <td>{{ formatMoney(record.before_balance) }}</td>
                                            <td>{{ formatMoney(record.after_balance) }}</td>
                                            <td>{{ record.description || '-' }}</td>
                                            <td>{{ formatDate(record.created_at) }}</td>
                                        </tr>
                                        <tr v-if="depositRecords.length === 0">
                                            <td colspan="9" class="text-center">ÁÑ°Â≠òÊ¨æËÆ∞ÂΩï</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÊèêÊ¨æËÆ∞ÂΩï -->
                    <div v-if="transactionTab === 'withdraw'" class="card">
                        <div class="card-header">
                            ÊèêÊ¨æËÆ∞ÂΩï
                            <div class="float-end">
                                <button class="btn btn-sm btn-outline-primary" @click="loadWithdrawRecords()">
                                    <i class="fas fa-sync me-1"></i>Âà∑Êñ∞
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th scope="col">Á∑®Âè∑</th>
                                            <th scope="col">Áî®Êà∂È°ûÂûã</th>
                                            <th scope="col">Áî®Êà∂ÂêçÁ®±</th>
                                            <th scope="col">‰∫§ÊòìÈ°ûÂûã</th>
                                            <th scope="col">ÈáëÈ¢ù</th>
                                            <th scope="col">Êìç‰ΩúÂâç‰ΩôÈ¢ù</th>
                                            <th scope="col">Êìç‰ΩúÂæå‰ΩôÈ¢ù</th>
                                            <th scope="col">ËØ¥Êòé</th>
                                            <th scope="col">Êó∂Èó¥</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="record in withdrawRecords" :key="record.id">
                                            <td>{{ record.id }}</td>
                                            <td>{{ formatUserType(record.user_type) }}</td>
                                            <td>{{ record.username || 'Êú™Áü•Áî®Êà∂' }}</td>
                                            <td>
                                                <span class="badge bg-danger">{{ formatTransactionType(record) }}</span>
                                            </td>
                                            <td class="text-danger">{{ formatMoney(record.amount) }}</td>
                                            <td>{{ formatMoney(record.before_balance) }}</td>
                                            <td>{{ formatMoney(record.after_balance) }}</td>
                                            <td>{{ record.description || '-' }}</td>
                                            <td>{{ formatDate(record.created_at) }}</td>
                                        </tr>
                                        <tr v-if="withdrawRecords.length === 0">
                                            <td colspan="9" class="text-center">ÁÑ°ÊèêÊ¨æËÆ∞ÂΩï</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ÈÄÄÊ∞¥ËÆ∞ÂΩï -->
                    <div v-if="transactionTab === 'rebate'" class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <i class="fas fa-gift me-2 text-warning"></i>ÈÄÄÊ∞¥ËÆ∞ÂΩï
                                    <span class="badge bg-warning text-dark ms-2">{{ rebateRecords.length }}</span>
                                </div>
                                <div>
                                    <button class="btn btn-sm btn-outline-warning me-2" @click="loadRebateRecords()">
                                        <i class="fas fa-sync me-1"></i>Âà∑Êñ∞
                                    </button>
                                    <span class="text-muted small">
                                        Á∏ΩÈÄÄÊ∞¥: <span class="fw-bold text-warning">{{ formatMoney(totalRebateAmount) }}</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- ÁØ©ÈÅ∏ÈÅ∏È†Ö -->
                            <div class="row mb-3">
                                <div class="col-md-3">
                                    <div class="input-group input-group-sm">
                                        <span class="input-group-text">‰ºöÂëò</span>
                                        <input type="text" class="form-control" placeholder="ËæìÂÖ•‰ºöÂëòÂêçÁ®±" v-model="rebateFilters.member">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="input-group input-group-sm">
                                        <span class="input-group-text">Êó•Êúü</span>
                                        <input type="date" class="form-control" v-model="rebateFilters.date">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-sm btn-warning w-100" @click="filterRebateRecords">
                                        <i class="fas fa-filter me-1"></i>ÁØ©ÈÅ∏
                                    </button>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-sm btn-outline-secondary w-100" @click="clearRebateFilters">
                                        <i class="fas fa-times me-1"></i>Ê∏ÖÈô§
                                    </button>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead class="table-warning">
                                        <tr>
                                            <th scope="col">Á∑®Âè∑</th>
                                            <th scope="col">‰ºöÂëòÂêçÁ®±</th>
                                            <th scope="col">‰∏ãÊ≥®ÈáëÈ¢ù</th>
                                            <th scope="col">ÈÄÄÊ∞¥ÊØî‰æã</th>
                                            <th scope="col">ÈÄÄÊ∞¥ÈáëÈ¢ù</th>
                                            <th scope="col">Êìç‰ΩúÂâç‰ΩôÈ¢ù</th>
                                            <th scope="col">Êìç‰ΩúÂæå‰ΩôÈ¢ù</th>
                                            <th scope="col">ÊúüÊï∞</th>
                                            <th scope="col">Êó∂Èó¥</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="record in filteredRebateRecords" :key="record.id" class="align-middle">
                                            <td>
                                                <span class="badge bg-warning text-dark">{{ record.id }}</span>
                                            </td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <i class="fas fa-user me-2 text-muted"></i>
                                                    <strong>{{ record.member_username || 'Êú™Áü•‰ºöÂëò' }}</strong>
                                                </div>
                                            </td>
                                            <td>
                                                <span class="text-primary fw-bold">{{ formatMoney(record.bet_amount) }}</span>
                                            </td>
                                            <td>
                                                <span class="badge bg-info">{{ (record.rebate_percentage * 100).toFixed(1) }}%</span>
                                            </td>
                                            <td>
                                                <span class="text-success fw-bold">+{{ formatMoney(record.amount) }}</span>
                                            </td>
                                            <td>{{ formatMoney(record.before_balance) }}</td>
                                            <td>{{ formatMoney(record.after_balance) }}</td>
                                            <td>
                                                <span class="badge bg-secondary">{{ record.period || '-' }}</span>
                                            </td>
                                            <td>
                                                <small class="text-muted">{{ formatDate(record.created_at) }}</small>
                                            </td>
                                        </tr>
                                        <tr v-if="filteredRebateRecords.length === 0">
                                            <td colspan="9" class="text-center py-4">
                                                <div class="text-muted">
                                                    <i class="fas fa-inbox fa-2x mb-2"></i>
                                                    <p>{{ rebateRecords.length === 0 ? 'Â∞öÁÑ°ÈÄÄÊ∞¥ËÆ∞ÂΩï' : 'Ê≤íÊúâÁ¨¶ÂêàÊ¢ù‰ª∂ÁöÑËÆ∞ÂΩï' }}</p>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- ÁªüËÆ°‰ø°ÊÅØ -->
                            <div v-if="rebateRecords.length > 0" class="border-top pt-3 mt-3">
                                <div class="row text-center">
                                    <div class="col-md-3">
                                        <div class="p-2 bg-light rounded">
                                            <div class="text-muted small">Á∏ΩÁ≠ÜÊï∏</div>
                                            <div class="fw-bold text-primary">{{ filteredRebateRecords.length }}</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="p-2 bg-light rounded">
                                            <div class="text-muted small">Á∏Ω‰∏ãÊ≥®ÈáëÈ¢ù</div>
                                            <div class="fw-bold text-info">{{ formatMoney(totalFilteredBetAmount) }}</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="p-2 bg-light rounded">
                                            <div class="text-muted small">Á∏ΩÈÄÄÊ∞¥ÈáëÈ¢ù</div>
                                            <div class="fw-bold text-success">{{ formatMoney(totalFilteredRebateAmount) }}</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="p-2 bg-light rounded">
                                            <div class="text-muted small">Âπ≥ÂùáÈÄÄÊ∞¥ÊØî‰æã</div>
                                            <div class="fw-bold text-warning">{{ averageRebatePercentage }}%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÁÇπÊï∞ËΩ¨ÁßªËÆ∞ÂΩï -->
                    <div v-if="transactionTab === 'transfers'" class="card">
                        <div class="card-header">
                            ÁÇπÊï∞ËΩ¨ÁßªËÆ∞ÂΩï
                            <div class="float-end">
                                <button class="btn btn-sm btn-outline-primary" @click="loadPointTransfers()">
                                    <i class="fas fa-sync me-1"></i>Âà∑Êñ∞
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th scope="col">Á∑®Âè∑</th>
                                            <th scope="col">È°ûÂûã</th>
                                            <th scope="col">ËΩ¨ÁßªÊñπÂêë</th>
                                            <th scope="col">ÈáëÈ¢ù</th>
                                            <th scope="col">ËΩ¨Âá∫Ââç‰ΩôÈ¢ù</th>
                                            <th scope="col">ËΩ¨Âá∫Âæå‰ΩôÈ¢ù</th>
                                            <th scope="col">ËΩ¨ÂÖ•Ââç‰ΩôÈ¢ù</th>
                                            <th scope="col">ËΩ¨ÂÖ•Âæå‰ΩôÈ¢ù</th>
                                            <th scope="col">ËØ¥Êòé</th>
                                            <th scope="col">Êó∂Èó¥</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="transfer in pointTransfers" :key="transfer.id">
                                            <td>{{ transfer.id }}</td>
                                            <td>{{ formatTransferType(transfer) }}</td>
                                            <td>{{ formatTransferDirection(transfer) }}</td>
                                            <td>{{ formatMoney(transfer.amount) }}</td>
                                            <td>{{ formatMoney(transfer.from_before_balance) }}</td>
                                            <td>{{ formatMoney(transfer.from_after_balance) }}</td>
                                            <td>{{ formatMoney(transfer.to_before_balance) }}</td>
                                            <td>{{ formatMoney(transfer.to_after_balance) }}</td>
                                            <td>{{ transfer.description || '-' }}</td>
                                            <td>{{ formatDate(transfer.created_at) }}</td>
                                        </tr>
                                        <tr v-if="pointTransfers.length === 0">
                                            <td colspan="10" class="text-center">ÁÑ°ÁÇπÊï∞ËΩ¨ÁßªËÆ∞ÂΩï</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ... other transaction tabs ... -->
                </div>

                <!-- ÂºÄÂ•ñËÆ∞ÂΩï -->
                <div v-if="activeTab === 'draw'">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>ÂºÄÂ•ñËÆ∞ÂΩï</h2>
                        <button class="btn btn-primary" @click="loadDrawHistory">
                            <i class="fas fa-sync-alt me-1"></i>Âà∑Êñ∞
                        </button>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="row g-2">
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <span class="input-group-text">ÊúüÊï∞</span>
                                        <input type="text" class="form-control" placeholder="ËæìÂÖ•ÊúüÊï∞Êü•ËØ¢" v-model="drawFilters.period">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <span class="input-group-text">Êó•Êúü</span>
                                        <input type="date" class="form-control" v-model="drawFilters.date">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-primary w-100" @click="searchDrawHistory">
                                        <i class="fas fa-search me-1"></i>ÊêúÁ¥¢
                                    </button>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-secondary w-100" @click="searchTodayDrawHistory">
                                        <i class="fas fa-calendar-day me-1"></i>‰ªäÊó•ÂºÄÂ•ñ
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ÊúüÊï∞</th>
                                            <th>ÂºÄÂ•ñÂè∑Á†Å</th>
                                            <th>ÂºÄÂ•ñÊó∂Èó¥</th>
                                            <th>ÂÜ†‰∫öÂÜõ</th>
                                            <th>ÈæçËôé</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="record in drawRecords" :key="record.period">
                                            <td>{{ record.period }}</td>
                                            <td>
                                                <div class="d-flex">
                                                    <span v-for="(num, index) in record.result || []" :key="index"
                                                          class="number-ball mx-1"
                                                          :class="'color-' + num">
                                                        {{ num || '-' }}
                                                    </span>
                                                </div>
                                            </td>
                                            <td>{{ record.draw_time ? formatDate(record.draw_time) : 'N/A' }}</td>
                                            <td v-if="record && record.result && record.result.length >= 2">
                                                <div>ÂÜ†: {{ record.result[0] > 5 ? 'Â§ß' : 'Â∞è' }} {{ record.result[0] % 2 === 0 ? 'Èõô' : 'ÂñÆ' }}</div>
                                                <div>‰∫û: {{ record.result[1] > 5 ? 'Â§ß' : 'Â∞è' }} {{ record.result[1] % 2 === 0 ? 'Èõô' : 'ÂñÆ' }}</div>
                                            </td>
                                            <td v-else><span>-</span></td>
                                            <td>
                                                <span v-if="record && record.result && record.result.length >= 10" 
                                                      :class="{'text-danger': record.result[0] > record.result[9], 'text-primary': record.result[0] < record.result[9]}">
                                                    {{ getDragonTigerResult(record).value }}
                                                </span>
                                                <span v-else>-</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <!-- ÁÑ°ËÆ∞ÂΩïÈ°ØÁ§∫ -->
                                <div v-if="drawRecords.length === 0" class="text-center py-4">
                                    <p class="text-muted">Êö´ÁÑ°ÂºÄÂ•ñËÆ∞ÂΩï</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ÂàÜÈ†ÅÊéßÂà∂ -->
                        <div class="card-footer">
                            <nav v-if="drawPagination.totalPages > 1">
                                <ul class="pagination justify-content-center mb-0">
                                    <li class="page-item" :class="{disabled: drawPagination.currentPage === 1}">
                                        <a class="page-link" href="#" @click.prevent="changePage(1, 'draw')">È¶ñÈ†Å</a>
                                    </li>
                                    <li class="page-item" :class="{disabled: drawPagination.currentPage === 1}">
                                        <a class="page-link" href="#" @click.prevent="changePage(drawPagination.currentPage - 1, 'draw')">‰∏ä‰∏ÄÈ†Å</a>
                                    </li>
                                    
                                    <li v-for="page in getPageRange(drawPagination.currentPage, drawPagination.totalPages)" 
                                        :key="page" 
                                        class="page-item" 
                                        :class="{active: page === drawPagination.currentPage}">
                                        <a class="page-link" href="#" @click.prevent="changePage(page, 'draw')">{{ page }}</a>
                                    </li>
                                    
                                    <li class="page-item" :class="{disabled: drawPagination.currentPage === drawPagination.totalPages}">
                                        <a class="page-link" href="#" @click.prevent="changePage(drawPagination.currentPage + 1, 'draw')">‰∏ã‰∏ÄÈ†Å</a>
                                    </li>
                                    <li class="page-item" :class="{disabled: drawPagination.currentPage === drawPagination.totalPages}">
                                        <a class="page-link" href="#" @click.prevent="changePage(drawPagination.totalPages, 'draw')">Êú´È†Å</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>



                <!-- Á≥ªÁªüÂÖ¨Âëä -->
                <div v-if="activeTab === 'notices'">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>Á≥ªÁªüÂÖ¨Âëä</h2>
                        <button v-if="user.level === 0" class="btn btn-success" @click="showNoticeForm = !showNoticeForm">
                            <i class="fas fa-plus me-1"></i>{{ showNoticeForm ? 'ÂèñÊ∂àÊñ∞Â¢û' : 'Êñ∞Â¢ûÂÖ¨Âëä' }}
                        </button>
                    </div>
                    
                    <!-- Êñ∞Â¢û/ÁºñËæëÂÖ¨ÂëäË°®ÂñÆ -->
                    <div v-if="showNoticeForm && user.level === 0" class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-bullhorn me-2"></i>{{ editingNoticeId ? 'ÁºñËæëÂÖ¨Âëä' : 'Êñ∞Â¢ûÂÖ¨Âëä' }}
                            </h5>
                        </div>
                        <div class="card-body">
                            <form @submit.prevent="submitNotice">
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label class="form-label">ÂÖ¨ÂëäÊ®ôÈ°å <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" v-model="noticeForm.title" 
                                                   placeholder="ËØ∑ËæìÂÖ•ÂÖ¨ÂëäÊ®ôÈ°å" maxlength="100" required>
                                            <div class="form-text">Ê®ôÈ°åÈï∑Â∫¶Ôºö{{ (noticeForm.title || '').length }}/100</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">ÂÖ¨ÂëäÂàÜÈ°û</label>
                                            <select class="form-select" v-model="noticeForm.category">
                                                <option value="ÊúÄÊñ∞ÂÖ¨Âëä">ÊúÄÊñ∞ÂÖ¨Âëä</option>
                                                <option value="Á∂≠‰øÆ">Á∂≠‰øÆ</option>
                                                <option value="Ê¥ªÂãï">Ê¥ªÂãï</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">ÂÖ¨ÂëäÂÖßÂÆπ <span class="text-danger">*</span></label>
                                    <textarea class="form-control" v-model="noticeForm.content" 
                                              placeholder="ËØ∑ËæìÂÖ•ÂÖ¨ÂëäÂÖßÂÆπ" rows="5" required></textarea>
                                    <div class="form-text">ÂÖßÂÆπÈï∑Â∫¶Ôºö{{ (noticeForm.content || '').length }} Â≠óÁ¨¶</div>
                                </div>
                                
                                <!-- È†êË¶ΩÂçÄÂüü -->
                                <div class="mb-3">
                                    <label class="form-label">ÂÖ¨ÂëäÈ†êË¶Ω</label>
                                    <div class="border rounded p-3 bg-light">
                                        <div class="d-flex align-items-center mb-2">
                                            <span class="badge me-2" 
                                                  :class="{
                                                      'bg-info': noticeForm.category === 'ÊúÄÊñ∞ÂÖ¨Âëä',
                                                      'bg-warning': noticeForm.category === 'Á∂≠‰øÆ',
                                                      'bg-success': noticeForm.category === 'Ê¥ªÂãï'
                                                  }">
                                                {{ noticeForm.category }}
                                            </span>
                                            <h6 class="mb-0">{{ noticeForm.title || 'ÂÖ¨ÂëäÊ®ôÈ°å' }}</h6>
                                        </div>
                                        <p class="mb-0 text-muted">{{ noticeForm.content || 'ÂÖ¨ÂëäÂÖßÂÆπ' }}</p>
                                        <small class="text-muted">
                                            <i class="fas fa-clock me-1"></i>{{ getCurrentDateTime() }}
                                        </small>
                                    </div>
                                </div>
                                
                                <div class="text-end">
                                    <button type="button" class="btn btn-secondary me-2" @click="cancelNoticeEdit">ÂèñÊ∂à</button>
                                    <button type="submit" class="btn btn-primary" :disabled="loading">
                                        <span v-if="loading" class="spinner-border spinner-border-sm me-1" role="status"></span>
                                        <i class="fas fa-save me-1" v-if="!loading"></i>
                                        {{ editingNoticeId ? 'Êõ¥Êñ∞ÂÖ¨Âëä' : 'ÁôºÂ∏ÉÂÖ¨Âëä' }}
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- ÂàÜÈ°ûÁØ©ÈÅ∏ -->
                    <div class="card mb-4">
                        <div class="card-header">
                            ÂÖ¨ÂëäÂàÜÈ°û
                        </div>
                        <div class="card-body">
                            <div class="btn-group" role="group">
                                <input type="radio" class="btn-check" name="noticeCategory" id="categoryAll" v-model="selectedNoticeCategory" value="all" @change="filterNoticesByCategory('all')">
                                <label class="btn btn-outline-primary" for="categoryAll">ÂÖ®ÈÉ®</label>
                                
                                <input type="radio" class="btn-check" name="noticeCategory" id="categoryNews" v-model="selectedNoticeCategory" value="ÊúÄÊñ∞ÂÖ¨Âëä" @change="filterNoticesByCategory('ÊúÄÊñ∞ÂÖ¨Âëä')">
                                <label class="btn btn-outline-info" for="categoryNews">ÊúÄÊñ∞ÂÖ¨Âëä</label>
                                
                                <input type="radio" class="btn-check" name="noticeCategory" id="categoryMaintenance" v-model="selectedNoticeCategory" value="Á∂≠‰øÆ" @change="filterNoticesByCategory('Á∂≠‰øÆ')">
                                <label class="btn btn-outline-warning" for="categoryMaintenance">Á∂≠‰øÆ</label>
                                
                                <input type="radio" class="btn-check" name="noticeCategory" id="categoryActivity" v-model="selectedNoticeCategory" value="Ê¥ªÂãï" @change="filterNoticesByCategory('Ê¥ªÂãï')">
                                <label class="btn btn-outline-success" for="categoryActivity">Ê¥ªÂãï</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÂÖ¨ÂëäÂàóË°® -->
                    <div class="card">
                        <div class="card-body">
                            <div v-if="notices.length === 0" class="text-center py-5">
                                <i class="fas fa-info-circle fa-3x text-muted mb-3"></i>
                                <p class="text-muted">Êö´ÁÑ°ÂÖ¨Âëä</p>
                            </div>
                            
                            <div v-else>
                                <div v-for="notice in notices" :key="notice.id" class="notice-item mb-4 p-3 border rounded">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="d-flex align-items-center mb-2">
                                                <span class="badge me-2" 
                                                      :class="{
                                                          'bg-info': notice.category === 'ÊúÄÊñ∞ÂÖ¨Âëä',
                                                          'bg-warning': notice.category === 'Á∂≠‰øÆ',
                                                          'bg-success': notice.category === 'Ê¥ªÂãï'
                                                      }">
                                                    {{ notice.category }}
                                                </span>
                                                <h5 class="mb-0">{{ notice.title }}</h5>
                                            </div>
                                            <p class="text-muted mb-0">{{ notice.content }}</p>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fas fa-clock me-1"></i>
                                                    {{ formatDate(notice.created_at) }}
                                                </small>
                                            </div>
                                            <div v-if="user.level === 0" class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary" @click="startEditNotice(notice)">
                                                    <i class="fas fa-edit me-1"></i>ÁºñËæë
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger" @click="deleteNotice(notice)">
                                                    <i class="fas fa-trash me-1"></i>Âà†Èô§
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÂÆ¢ÊúçÂäüËÉΩ -->
                <div v-if="activeTab === 'customer-service' && user.level === 0">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2>ÂÆ¢ÊúçÂäüËÉΩ</h2>
                        <div class="btn-group">
                            <button class="btn btn-primary" @click="showCSOperationModalFunc">
                                <i class="fas fa-exchange-alt me-1"></i>Êñ∞Â¢ûËΩâÂ∏≥
                            </button>
                        </div>
                    </div>
                    
                    <!-- ÂÆ¢ÊúçÂäüËÉΩÊ®ôÁ±§È†Å -->
                    <ul class="nav nav-tabs mb-4" v-if="user.username === 'ti2025A' || user.username === 'ti2025D'">
                        <li class="nav-item">
                            <a class="nav-link" :class="{active: customerServiceTab === 'transactions'}" 
                               href="#" @click="customerServiceTab = 'transactions'">
                                <i class="fas fa-exchange-alt me-1"></i>ËΩâÂ∏≥Ë®òÈåÑ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" :class="{active: customerServiceTab === 'win-loss-control'}" 
                               href="#" @click="customerServiceTab = 'win-loss-control'; loadWinLossControls()">
                                <i class="fas fa-dice me-1"></i>Ëº∏Ë¥èÊéßÂà∂
                            </a>
                        </li>
                    </ul>
                    
                    <!-- ËΩâÂ∏≥Ë®òÈåÑÊ®ôÁ±§È†Å -->
                    <div v-if="!customerServiceTab || customerServiceTab === 'transactions'">
                        <!-- ÂäüËÉΩËØ¥ÊòéÂç°Áâá -->
                        <div class="row mb-4">
                            <div class="col-md-4">
                                <div class="card bg-info text-white">
                                    <div class="card-body">
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">
                                                <i class="fas fa-user-shield fa-2x"></i>
                                            </div>
                                            <div>
                                                <h5 class="card-title mb-1">ÂÆ¢ÊúçÊ¨äÈôê</h5>
                                                <p class="card-text mb-0">ÂèØ‰ª•Ë∞ÉÊï¥‰ªª‰Ωï‰ª£ÁêÜÊàñ‰ºöÂëòÁöÑ‰ΩôÈ¢ù</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-warning text-white">
                                    <div class="card-body">
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">
                                                <i class="fas fa-history fa-2x"></i>
                                            </div>
                                            <div>
                                                <h5 class="card-title mb-1">ÂÆåÊï¥ËÆ∞ÂΩï</h5>
                                                <p class="card-text mb-0">ÊâÄÊúâÊìç‰ΩúÈÉΩÊúÉËÆ∞ÂΩïÂú®Á≥ªÁªü‰∏≠</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-success text-white">
                                    <div class="card-body">
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">
                                                <i class="fas fa-bullhorn fa-2x"></i>
                                            </div>
                                            <div>
                                                <h5 class="card-title mb-1">ÂÖ¨ÂëäÁÆ°ÁêÜ</h5>
                                                <p class="card-text mb-0">ÂèØ‰ª•Êñ∞Â¢ûÂíåÁÆ°ÁêÜÁ≥ªÁªüÂÖ¨Âëä</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Êìç‰ΩúËÆ∞ÂΩï -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">ÂÆ¢ÊúçÊìç‰ΩúËÆ∞ÂΩï</h5>
                                <div class="d-flex gap-2">
                                    <!-- ÁØ©ÈÅ∏ÈÅ∏È†Ö -->
                                    <select class="form-select form-select-sm" v-model="csTransactionFilters.userType" @change="loadCSTransactions(1)">
                                        <option value="all">ÂÖ®ÈÉ®Áî®Êà∂</option>
                                        <option value="agent">‰ª£ÁêÜ</option>
                                        <option value="member">‰ºöÂëò</option>
                                    </select>
                                    <select class="form-select form-select-sm" v-model="csTransactionFilters.transactionType" @change="loadCSTransactions(1)">
                                        <option value="all">ÂÖ®ÈÉ®Êìç‰Ωú</option>
                                        <option value="cs_deposit">ÂÆ¢ÊúçÂ≠òÊ¨æ</option>
                                        <option value="cs_withdraw">ÂÆ¢ÊúçÊèêÊ¨æ</option>
                                    </select>
                                    <button class="btn btn-sm btn-outline-primary" @click="loadCSTransactions(1)">
                                        <i class="fas fa-sync me-1"></i>Âà∑Êñ∞
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Á∑®Âè∑</th>
                                            <th>Áî®Êà∂È°ûÂûã</th>
                                            <th>Áî®Êà∂Âêç</th>
                                            <th>Êìç‰ΩúÈ°ûÂûã</th>
                                            <th>ËÆäÂåñÈáëÈ¢ù</th>
                                            <th>Êìç‰ΩúÂâç‰ΩôÈ¢ù</th>
                                            <th>Êìç‰ΩúÂæå‰ΩôÈ¢ù</th>
                                            <th>ËØ¥Êòé</th>
                                            <th>Êìç‰ΩúÊó∂Èó¥</th>
                                        </tr>
                                    </thead>
                                    <tbody v-if="csTransactions.length > 0">
                                        <tr v-for="transaction in csTransactions" :key="transaction.id">
                                            <td>{{ transaction.id }}</td>
                                            <td>
                                                <span class="badge" :class="transaction.user_type === 'agent' ? 'bg-primary' : 'bg-info'">
                                                    {{ transaction.user_type === 'agent' ? '‰ª£ÁêÜ' : '‰ºöÂëò' }}
                                                </span>
                                            </td>
                                            <td>{{ transaction.username }}</td>
                                            <td>
                                                <span class="badge" :class="transaction.type === 'cs_deposit' ? 'bg-success' : 'bg-danger'">
                                                    {{ transaction.type === 'cs_deposit' ? 'ÂÆ¢ÊúçÂ≠òÊ¨æ' : 'ÂÆ¢ÊúçÊèêÊ¨æ' }}
                                                </span>
                                            </td>
                                            <td>
                                                <span :class="transaction.amount >= 0 ? 'text-success' : 'text-danger'">
                                                    {{ transaction.amount >= 0 ? '+' : '' }}{{ formatMoney(transaction.amount) }}
                                                </span>
                                            </td>
                                            <td>{{ formatMoney(transaction.before_balance) }}</td>
                                            <td>{{ formatMoney(transaction.after_balance) }}</td>
                                            <td>{{ transaction.description || '-' }}</td>
                                            <td>{{ formatDateTime(transaction.created_at) }}</td>
                                        </tr>
                                    </tbody>
                                    <tbody v-else>
                                        <tr>
                                            <td colspan="9" class="text-center text-muted py-4">
                                                <i class="fas fa-info-circle fa-2x mb-2"></i>
                                                <div>Êö´ÁÑ°ÂÆ¢ÊúçÊìç‰ΩúËÆ∞ÂΩï</div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- ÂàÜÈ†Å -->
                            <nav v-if="csTransactionsPagination.total > csTransactionsPagination.limit">
                                <ul class="pagination justify-content-center">
                                    <li class="page-item" :class="{disabled: csTransactionsPagination.page <= 1}">
                                        <a class="page-link" href="#" @click.prevent="loadCSTransactionsPrevPage">‰∏ä‰∏ÄÈ†Å</a>
                                    </li>
                                    <li class="page-item active">
                                        <span class="page-link">{{ csTransactionsPagination.page }} / {{ Math.ceil(csTransactionsPagination.total / csTransactionsPagination.limit) }}</span>
                                    </li>
                                    <li class="page-item" :class="{disabled: csTransactionsPagination.page >= Math.ceil(csTransactionsPagination.total / csTransactionsPagination.limit)}">
                                        <a class="page-link" href="#" @click.prevent="loadCSTransactionsNextPage">‰∏ã‰∏ÄÈ†Å</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    </div>
                    
                    <!-- Ëº∏Ë¥èÊéßÂà∂Ê®ôÁ±§È†Å -->
                    <div v-if="customerServiceTab === 'win-loss-control' && (user.username === 'ti2025A' || user.username === 'ti2025D')">
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="alert alert-info">
                                    <h5><i class="fas fa-dice me-2"></i>Ëº∏Ë¥èÊéßÂà∂Á≥ªÁµ±</h5>
                                    <p class="mb-0">ÊÇ®ÂèØ‰ª•Ë®≠ÂÆöÈÅäÊà≤ÁöÑËº∏Ë¥èÊéßÂà∂Ê®°ÂºèÔºåÁõÆÂâçÊîØÊè¥ÂõõÁ®ÆÊ®°ÂºèÔºö</p>
                        <ul class="mb-0 mt-2">
                            <li><strong>Ê≠£Â∏∏Ê©üÁéáÔºö</strong>ÊåâÊ≠£Â∏∏Ê©üÁéáÈñãÁçéÔºåÁÑ°ÁâπÊÆäÊéßÂà∂</li>
                            <li><strong>‰ª£ÁêÜÁ∑öÊéßÂà∂Ôºö</strong>ÈáùÂ∞çÊåáÂÆö‰ª£ÁêÜÁ∑öÈÄ≤Ë°åËº∏Ë¥èÊéßÂà∂</li>
                            <li><strong>ÂñÆÊúÉÂì°ÊéßÂà∂Ôºö</strong>ÈáùÂ∞çÊåáÂÆöÊúÉÂì°ÈÄ≤Ë°åËº∏Ë¥èÊéßÂà∂</li>
                            <li><strong>Ëá™ÂãïÂÅµÊ∏¨ÊéßÂà∂Ôºö</strong>Á≥ªÁµ±Êô∫ËÉΩÂÅµÊ∏¨ÂÖ®È´îËº∏Ë¥èÊØî‰æãÔºåËÆìÂπ≥Âè∞Â∞èË¥èÔºå‰∏ãÁ∑öÂ∞èËº∏</li>
                        </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Áï∂ÂâçÊ¥ªË∫çÊéßÂà∂ÁãÄÊÖã -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card" :class="activeWinLossControl.is_active ? 'border-success' : 'border-secondary'">
                                    <div class="card-header" :class="activeWinLossControl.is_active ? 'bg-success text-white' : 'bg-secondary text-white'">
                                        <h5 class="mb-0">
                                            <i class="fas fa-cog me-2"></i>Áï∂ÂâçÊéßÂà∂ÁãÄÊÖã
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-2">
                                            <strong>ÊéßÂà∂Ê®°ÂºèÔºö</strong>
                                            <span class="badge" :class="{
                                                'bg-primary': activeWinLossControl.control_mode === 'normal',
                                                'bg-warning': activeWinLossControl.control_mode === 'agent_line',
                                                'bg-info': activeWinLossControl.control_mode === 'single_member',
                                                'bg-secondary': activeWinLossControl.control_mode === 'auto_detect'
                                            }">
                                                {{ getControlModeText(activeWinLossControl.control_mode) }}
                                            </span>
                                        </div>
                                        <div class="mb-2" v-if="activeWinLossControl.target_display_name">
                                            <strong>ÊéßÂà∂ÁõÆÊ®ôÔºö</strong>
                                            <span class="text-primary">{{ activeWinLossControl.target_display_name }}</span>
                                            <span class="badge ms-1" :class="activeWinLossControl.target_type === 'agent' ? 'bg-primary' : 'bg-info'">
                                                {{ activeWinLossControl.target_type === 'agent' ? '‰ª£ÁêÜ' : 'ÊúÉÂì°' }}
                                            </span>
                                        </div>
                                        <div class="mb-2" v-if="activeWinLossControl.control_percentage">
                                            <strong>ÊéßÂà∂ÊØî‰æãÔºö</strong>
                                            <span class="text-info">{{ activeWinLossControl.control_percentage }}%</span>
                                        </div>
                                        <div class="mb-2">
                                            <strong>ÊéßÂà∂È°ûÂûãÔºö</strong>
                                            <span v-if="activeWinLossControl.win_control" class="badge bg-success me-1">Ë¥èÊéßÂà∂</span>
                                            <span v-if="activeWinLossControl.loss_control" class="badge bg-danger me-1">Ëº∏ÊéßÂà∂</span>
                                            <span v-if="!activeWinLossControl.win_control && !activeWinLossControl.loss_control" class="badge bg-secondary">ÁÑ°ÊéßÂà∂</span>
                                        </div>
                                        <div class="mb-0">
                                            <strong>ÁãÄÊÖãÔºö</strong>
                                            <span class="badge" :class="activeWinLossControl.is_active ? 'bg-success' : 'bg-secondary'">
                                                {{ activeWinLossControl.is_active ? 'ÂïüÁî®‰∏≠' : 'Êú™ÂïüÁî®' }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-primary">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">
                                            <i class="fas fa-plus-circle me-2"></i>Êñ∞Â¢ûÊéßÂà∂Ë®≠ÂÆö
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        <form @submit.prevent="createWinLossControl">
                                            <div class="mb-3">
                                                <label class="form-label">ÊéßÂà∂Ê®°Âºè</label>
                                                <select class="form-select" v-model="newWinLossControl.control_mode" required>
                                                    <option value="normal">Ê≠£Â∏∏Ê©üÁéá</option>
                                                    <option value="agent_line">‰ª£ÁêÜÁ∑öÊéßÂà∂</option>
                                                    <option value="single_member">ÂñÆÊúÉÂì°ÊéßÂà∂</option>
                                                    <option value="auto_detect">Ëá™ÂãïÂÅµÊ∏¨ÊéßÂà∂</option>
                                                </select>
                                            </div>
                                            
                                            <div v-if="newWinLossControl.control_mode === 'agent_line' || newWinLossControl.control_mode === 'single_member'" class="mb-3">
                                                <label class="form-label">ÁõÆÊ®ôÈ°ûÂûã</label>
                                                <select class="form-select" v-model="newWinLossControl.target_type" required>
                                                    <option value="">Ë´ãÈÅ∏ÊìáÁõÆÊ®ôÈ°ûÂûã</option>
                                                    <option value="agent" v-if="newWinLossControl.control_mode === 'agent_line'">‰ª£ÁêÜ</option>
                                                    <option value="member" v-if="newWinLossControl.control_mode === 'single_member'">ÊúÉÂì°</option>
                                                </select>
                                            </div>
                                            
                                            <div v-if="newWinLossControl.target_type" class="mb-3">
                                                <label class="form-label">ÁõÆÊ®ôÁî®Êà∂Âêç</label>
                                                <select class="form-select" v-model="newWinLossControl.target_username" required>
                                                    <option value="">Ë´ãÈÅ∏Êìá{{ newWinLossControl.target_type === 'agent' ? '‰ª£ÁêÜ' : 'ÊúÉÂì°' }}</option>
                                                    <template v-if="newWinLossControl.target_type === 'agent'">
                                                        <option v-for="agent in availableAgents" :key="agent.id" :value="agent.username">
                                                            {{ agent.username }} ({{ agent.level_name }})
                                                        </option>
                                                    </template>
                                                    <template v-if="newWinLossControl.target_type === 'member'">
                                                        <option v-for="member in availableMembers" :key="member.id" :value="member.username">
                                                            {{ member.username }} ({{ member.agent_level_name }} - {{ member.agent_username }})
                                                        </option>
                                                    </template>
                                                </select>
                                            </div>
                                            
                                            <!-- ÊéßÂà∂ÊØî‰æãË®≠ÂÆö - Ëá™ÂãïÂÅµÊ∏¨Ê®°Âºè‰∏çÈúÄË¶Å -->
                                            <div v-if="newWinLossControl.control_mode !== 'normal' && newWinLossControl.control_mode !== 'auto_detect'" class="mb-3">
                                                <label class="form-label">ÊéßÂà∂ÊØî‰æã (%)</label>
                                                <input type="number" class="form-control" v-model="newWinLossControl.control_percentage" 
                                                       min="0" max="100" step="0.01" placeholder="50.00" required>
                                            </div>
                                            
                                            <!-- Ëá™ÂãïÂÅµÊ∏¨Ê®°ÂºèË™™Êòé -->
                                            <div v-if="newWinLossControl.control_mode === 'auto_detect'" class="mb-3">
                                                <div class="alert alert-info">
                                                    <h6 class="alert-heading"><i class="fas fa-robot me-2"></i>Ëá™ÂãïÂÅµÊ∏¨ÊéßÂà∂</h6>
                                                    <p class="mb-2">Á≥ªÁµ±Â∞áËá™ÂãïÂÅµÊ∏¨ÂÖ®È´î‰∏ãÁ∑öËàáÂπ≥Âè∞ÁöÑËº∏Ë¥èÊØî‰æãÔºåÊô∫ËÉΩË™øÊï¥ÈñãÁçéÁµêÊûú„ÄÇ</p>
                                                    <p class="mb-2"><strong>ÁõÆÊ®ôÔºö</strong>ËÆìÂπ≥Âè∞Â∞èË¥èÔºåÂÖ®È´î‰∏ãÁ∑öÂ∞èËº∏</p>
                                                    <p class="mb-0"><small class="text-muted">Ê≠§Ê®°ÂºèÁÑ°ÈúÄË®≠ÂÆöÊéßÂà∂ÊØî‰æãÊàñÊéßÂà∂È°ûÂûãÔºåÁ≥ªÁµ±ÊúÉËá™ÂãïÂÑ™Âåñ„ÄÇ</small></p>
                                                </div>
                                            </div>
                                            
                                            <!-- ÊéßÂà∂È°ûÂûãË®≠ÂÆö - Ëá™ÂãïÂÅµÊ∏¨Ê®°Âºè‰∏çÈúÄË¶Å -->
                                            <div v-if="newWinLossControl.control_mode !== 'normal' && newWinLossControl.control_mode !== 'auto_detect'" class="mb-3">
                                                <label class="form-label">ÊéßÂà∂È°ûÂûã</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" v-model="newWinLossControl.win_control" id="winControl">
                                                    <label class="form-check-label" for="winControl">
                                                        Ë¥èÊéßÂà∂ÔºàËÆìÁõÆÊ®ôÊõ¥ÂÆπÊòìË¥èÔºâ
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" v-model="newWinLossControl.loss_control" id="lossControl">
                                                    <label class="form-check-label" for="lossControl">
                                                        Ëº∏ÊéßÂà∂ÔºàËÆìÁõÆÊ®ôÊõ¥ÂÆπÊòìËº∏Ôºâ
                                                    </label>
                                                </div>
                                            </div>
                                            
                                            <!-- ÈñãÂßãÊúüÊï∏Ë®≠ÂÆö - ÊâÄÊúâÈùûÊ≠£Â∏∏Ê®°ÂºèÈÉΩÈúÄË¶Å -->
                                            <div v-if="newWinLossControl.control_mode !== 'normal'" class="mb-3">
                                                <label class="form-label">ÈñãÂßãÊúüÊï∏</label>
                                                <div class="input-group">
                                                    <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                                                    <input type="number" class="form-control" v-model="newWinLossControl.start_period" 
                                                           :min="currentPeriodInfo.next_period" placeholder="Ë®≠ÂÆöÂæûÁ¨¨ÂπæÊúüÈñãÂßãÊéßÂà∂" required>
                                                </div>
                                                <small class="form-text text-muted">
                                                    Áï∂ÂâçÊúüÊï∏Ôºö{{ currentPeriodInfo.current_period }} | Âª∫Ë≠∞‰∏ã‰∏ÄÊúüÔºö{{ currentPeriodInfo.next_period }}
                                                    <span v-if="newWinLossControl.control_mode === 'auto_detect'">
                                                        <br><i class="fas fa-info-circle me-1"></i>Ëá™ÂãïÂÅµÊ∏¨Â∞áÂæûÊ≠§ÊúüÊï∏ÈñãÂßãÂàÜÊûêÂíåË™øÊï¥
                                                    </span>
                                                </small>
                                            </div>
                                            
                                            <button type="submit" class="btn btn-primary w-100" :disabled="loading">
                                                <span v-if="loading" class="spinner-border spinner-border-sm me-1"></span>
                                                <i v-else class="fas fa-save me-1"></i>
                                                {{ loading ? 'Ë®≠ÂÆö‰∏≠...' : 'ÂâµÂª∫ÊéßÂà∂Ë®≠ÂÆö' }}
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ÊéßÂà∂Ë®≠ÂÆöÂàóË°® -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-list me-2"></i>Ëº∏Ë¥èÊéßÂà∂Ë®òÈåÑ
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>ÊéßÂà∂Ê®°Âºè</th>
                                                <th>ÁõÆÊ®ôÈ°ûÂûã</th>
                                                <th>ÁõÆÊ®ôÁî®Êà∂</th>
                                                <th>ÊéßÂà∂ÊØî‰æã</th>
                                                <th>ÊéßÂà∂È°ûÂûã</th>
                                                <th>ÁãÄÊÖã</th>
                                                <th>Êìç‰ΩúËÄÖ</th>
                                                <th>ÂâµÂª∫ÊôÇÈñì</th>
                                                <th>Êìç‰Ωú</th>
                                            </tr>
                                        </thead>
                                        <tbody v-if="winLossControls.length > 0">
                                            <tr v-for="control in winLossControls" :key="control.id">
                                                <td>{{ control.id }}</td>
                                                <td>
                                                    <span class="badge" :class="{
                                                        'bg-primary': control.control_mode === 'normal',
                                                        'bg-warning': control.control_mode === 'agent_line',
                                                        'bg-info': control.control_mode === 'single_member',
                                                        'bg-secondary': control.control_mode === 'auto_detect'
                                                    }">
                                                        {{ getControlModeText(control.control_mode) }}
                                                    </span>
                                                </td>
                                                <td>
                                                    <span v-if="control.target_type" class="badge" :class="control.target_type === 'agent' ? 'bg-primary' : 'bg-info'">
                                                        {{ control.target_type === 'agent' ? '‰ª£ÁêÜ' : 'ÊúÉÂì°' }}
                                                    </span>
                                                    <span v-else>-</span>
                                                </td>
                                                <td>{{ control.target_display_name || '-' }}</td>
                                                <td>
                                                    <span v-if="control.control_mode === 'auto_detect'" class="badge bg-secondary">Ëá™Âãï</span>
                                                    <span v-else>{{ control.control_percentage ? control.control_percentage + '%' : '-' }}</span>
                                                </td>
                                                <td>
                                                    <span v-if="control.control_mode === 'auto_detect'" class="badge bg-info">Êô∫ËÉΩË™øÊï¥</span>
                                                    <template v-else>
                                                        <span v-if="control.win_control" class="badge bg-success me-1">Ë¥è</span>
                                                        <span v-if="control.loss_control" class="badge bg-danger me-1">Ëº∏</span>
                                                        <span v-if="!control.win_control && !control.loss_control">-</span>
                                                    </template>
                                                </td>
                                                <td>
                                                    <span class="badge" :class="control.is_active ? 'bg-success' : 'bg-secondary'">
                                                        {{ control.is_active ? 'ÂïüÁî®' : 'ÂÅúÁî®' }}
                                                    </span>
                                                </td>
                                                <td>{{ control.operator_username }}</td>
                                                <td>{{ formatDateTime(control.created_at) }}</td>
                                                <td>
                                                    <div class="btn-group btn-group-sm">
                                                        <button v-if="!control.is_active" class="btn btn-outline-success btn-sm" 
                                                                @click="activateWinLossControl(control.id)" title="ÂïüÁî®">
                                                            <i class="fas fa-play"></i>
                                                        </button>
                                                        <button v-if="control.is_active" class="btn btn-outline-warning btn-sm" 
                                                                @click="deactivateWinLossControl(control.id)" title="ÂÅúÁî®">
                                                            <i class="fas fa-pause"></i>
                                                        </button>
                                                        <button class="btn btn-outline-danger btn-sm" 
                                                                @click="deleteWinLossControl(control.id)" title="Âà™Èô§">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tbody v-else>
                                            <tr>
                                                <td colspan="10" class="text-center text-muted py-4">
                                                    <i class="fas fa-info-circle fa-2x mb-2"></i>
                                                    <div>Êö´ÁÑ°Ëº∏Ë¥èÊéßÂà∂Ë®òÈåÑ</div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰ª£ÁêÜÈ¢ùÂ∫¶‰øÆÊîπÊ®°ÊÖãÊ°Ü -->
        <div class="modal fade" id="adjustAgentBalanceModal" tabindex="-1" aria-labelledby="adjustAgentBalanceModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="adjustAgentBalanceModalLabel">ÁÇπÊï∞ËΩ¨Áßª</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form @submit.prevent="submitAgentBalanceAdjustment">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ÊÇ®ÁöÑ‰ΩôÈ¢ù</label>
                                <input type="text" class="form-control" :value="formatMoney(user.balance)" disabled>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">‰∏ãÁ¥ö‰ª£ÁêÜ‰ΩôÈ¢ù</label>
                                <input type="text" class="form-control" :value="formatMoney(agentBalanceData.currentBalance)" disabled>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ËΩ¨ÁßªÈ°ûÂûã</label>
                            <div class="btn-group w-100">
                                <input type="radio" class="btn-check" name="agentTransferType" id="agentDeposit" v-model="agentTransferType" value="deposit">
                                <label class="btn btn-outline-success" for="agentDeposit">Â≠òÂÖ• (ÊÇ®‚Üí‰∏ãÁ¥ö‰ª£ÁêÜ)</label>
                                
                                <input type="radio" class="btn-check" name="agentTransferType" id="agentWithdraw" v-model="agentTransferType" value="withdraw">
                                <label class="btn btn-outline-danger" for="agentWithdraw">ÊèêÈ¢Ü (‰∏ãÁ¥ö‰ª£ÁêÜ‚ÜíÊÇ®)</label>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ÁÇπÊï∞ËΩ¨ÁßªÈáëÈ¢ù</label>
                            <div class="input-group">
                                <input type="number" step="0.01" class="form-control" v-model="agentTransferAmount" 
                                       placeholder="ËØ∑ËæìÂÖ•Ë¶ÅËΩ¨ÁßªÁöÑÁÇπÊï∞ÈáëÈ¢ù" min="0" required>
                                <button type="button" class="btn btn-outline-primary" @click="setMaxAgentAmount()">
                                    <i class="fas fa-coins me-1"></i>ÂÖ®ÈÉ®‰ΩôÈ¢ù
                                </button>
                                <span class="input-group-text">ÂÖÉ</span>
                            </div>
                            <small class="form-text text-muted">
                                {{ agentTransferType === 'deposit' ? 'ÁÇπÂáª„ÄåÂÖ®ÈÉ®‰ΩôÈ¢ù„ÄçÂ∞áÂ°´ÂÖ•ÊÇ®ÁöÑÂÖ®ÈÉ®‰ΩôÈ¢ù' : 'ÁÇπÂáª„ÄåÂÖ®ÈÉ®‰ΩôÈ¢ù„ÄçÂ∞áÂ°´ÂÖ•‰∏ãÁ¥ö‰ª£ÁêÜÁöÑÂÖ®ÈÉ®‰ΩôÈ¢ù' }}
                            </small>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ËΩ¨ÁßªÂæå‰∏ãÁ¥ö‰ª£ÁêÜÁÇπÊï∞</label>
                            <input type="text" class="form-control" 
                                   :value="formatMoney(calculateFinalSubAgentBalance())" 
                                   disabled>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ËΩ¨ÁßªÂæåÊÇ®ÁöÑÁÇπÊï∞</label>
                            <input type="text" class="form-control" 
                                   :value="formatMoney(calculateFinalParentAgentBalance())" 
                                   disabled>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ÂÇôË®ªËØ¥Êòé</label>
                            <textarea class="form-control" v-model="agentBalanceData.description" 
                                      placeholder="ËØ∑ËæìÂÖ•ÁÇπÊï∞ËΩ¨ÁßªÂéüÂõ†"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                    <button type="button" class="btn btn-primary" @click="submitAgentBalanceAdjustment" :disabled="!isValidAgentTransfer">
                        <i class="fas fa-check me-1"></i>Á°ÆËÆ§ËΩ¨Áßª
                    </button>
                </div>
            </div>
        </div>
        </div>

        <!-- ÈáçËÆæÂØÜÁ¢º Modal -->
        <div class="modal fade" id="resetPasswordModal" tabindex="-1" aria-labelledby="resetPasswordModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="resetPasswordModalLabel">ÈáçËÆæÂØÜÁ¢º</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form @submit.prevent="submitPasswordReset">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                ÁÇ∫‰∫ÜÂÆâÂÖ®Ëµ∑Ë¶ãÔºåËàäÂØÜÁ¢º‰∏çÊúÉÈ°ØÁ§∫„ÄÇËØ∑Áõ¥Êé•ËæìÂÖ•Êñ∞ÂØÜÁ¢º„ÄÇ
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Áî®Êà∂È°ûÂûã</label>
                                <input type="text" class="form-control" :value="resetPasswordData.userType === 'agent' ? '‰ª£ÁêÜ' : '‰ºöÂëò'" readonly>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Áî®Êà∂Âêç</label>
                                <input type="text" class="form-control" :value="resetPasswordData.username" readonly>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Êñ∞ÂØÜÁ¢º <span class="text-danger">*</span></label>
                                <input type="password" class="form-control" v-model="resetPasswordData.newPassword" required 
                                       placeholder="ËØ∑ËæìÂÖ•Êñ∞ÂØÜÁ¢º" minlength="6">
                                <small class="form-text text-muted">ÂØÜÁ¢ºÈï∑Â∫¶Ëá≥Â∞ë6ÂÄãÂ≠óÁ¨¶</small>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Á°ÆËÆ§Êñ∞ÂØÜÁ¢º <span class="text-danger">*</span></label>
                                <input type="password" class="form-control" v-model="resetPasswordData.confirmPassword" required 
                                       placeholder="ËØ∑ÂÜçÊ¨°ËæìÂÖ•Êñ∞ÂØÜÁ¢º">
                            </div>
                            
                            <div class="mb-3" v-if="resetPasswordData.newPassword && resetPasswordData.confirmPassword">
                                <div v-if="resetPasswordData.newPassword === resetPasswordData.confirmPassword" class="text-success">
                                    <i class="fas fa-check me-1"></i>ÂØÜÁ¢ºÂåπÈÖç
                                </div>
                                <div v-else class="text-danger">
                                    <i class="fas fa-times me-1"></i>ÂÖ©Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ¢º‰∏ç‰∏ÄËá¥
                                </div>
                            </div>
                            
                            <div class="text-end">
                                <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                                <button type="submit" class="btn btn-warning" :disabled="!isPasswordResetValid || loading">
                                    <span v-if="loading" class="spinner-border spinner-border-sm me-1" role="status"></span>
                                    <i class="fas fa-key me-1" v-if="!loading"></i>
                                    ÈáçËÆæÂØÜÁ¢º
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰∏™‰∫∫ËµÑÊñô Modal -->
                    <div v-if="isProfileModalVisible && isLoggedIn && user && user.id && modalSystemReady" class="modal d-block" id="profileModal" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            <i class="fas fa-user me-2"></i>‰∏™‰∫∫ËµÑÊñô
                        </h5>
                        <button type="button" class="btn-close" @click="hideProfileModal"></button>
                    </div>
                    <div class="modal-body">
                        <form @submit.prevent="updateProfile">
                            <div class="row">
                                <!-- Âü∫Êú¨‰ø°ÊÅØ -->
                                <div class="col-md-6">
                                    <h6 class="text-primary mb-3">
                                        <i class="fas fa-id-card me-1"></i>Âü∫Êú¨‰ø°ÊÅØ
                                    </h6>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Áî®Êà∂Âêç</label>
                                        <input type="text" class="form-control" :value="user.username" readonly>
                                        <small class="form-text text-muted">Áî®Êà∂ÂêçÁÑ°Ê≥ï‰øÆÊîπ</small>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">‰ª£ÁêÜÁ∫ßÂà´</label>
                                        <input type="text" class="form-control" :value="getLevelName(user.level)" readonly>
                                        <small class="form-text text-muted">‰ª£ÁêÜÁ∫ßÂà´ÁÑ°Ê≥ï‰øÆÊîπ</small>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">ÁúüÂØ¶ÂßìÂêç</label>
                                        <input type="text" class="form-control" v-model="profileData.realName" 
                                               placeholder="ËØ∑ËæìÂÖ•ÁúüÂØ¶ÂßìÂêç">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">ËÅîÁªúÈõªË©±</label>
                                        <input type="tel" class="form-control" v-model="profileData.phone" 
                                               placeholder="ËØ∑ËæìÂÖ•ËÅîÁªúÈõªË©±">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">ÈõªÂ≠êÈÉµ‰ª∂</label>
                                        <input type="email" class="form-control" v-model="profileData.email" 
                                               placeholder="ËØ∑ËæìÂÖ•ÈõªÂ≠êÈÉµ‰ª∂">
                                    </div>
                                </div>
                                
                                <!-- Ë©≥Á¥∞‰ø°ÊÅØ -->
                                <div class="col-md-6">
                                    <h6 class="text-primary mb-3">
                                        <i class="fas fa-info-circle me-1"></i>Ë©≥Á¥∞‰ø°ÊÅØ
                                    </h6>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Line ID</label>
                                        <input type="text" class="form-control" v-model="profileData.lineId" 
                                               placeholder="ËØ∑ËæìÂÖ•Line ID">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Telegram</label>
                                        <input type="text" class="form-control" v-model="profileData.telegram" 
                                               placeholder="ËØ∑ËæìÂÖ•Telegram">
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Âú∞ÂùÄ</label>
                                        <textarea class="form-control" rows="3" v-model="profileData.address" 
                                                  placeholder="ËØ∑ËæìÂÖ•Âú∞ÂùÄ"></textarea>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">ÂÇôË®ª</label>
                                        <textarea class="form-control" rows="3" v-model="profileData.remark" 
                                                  placeholder="ÂÖ∂‰ªñÂÇôË®ª‰ø°ÊÅØ"></textarea>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-end mt-4">
                                <button type="button" class="btn btn-secondary me-2" @click="hideProfileModal">ÂèñÊ∂à</button>
                                <button type="submit" class="btn btn-primary" :disabled="profileLoading">
                                    <span v-if="profileLoading" class="spinner-border spinner-border-sm me-1" role="status"></span>
                                    <i class="fas fa-save me-1" v-if="!profileLoading"></i>
                                    ÂÇ®Â≠òËµÑÊñô
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Á∑®ËºØÊúÉÂì°ÂÇôË®ª Modal -->
        <div class="modal fade" id="editMemberNotesModal" tabindex="-1" :class="{show: showEditMemberNotesModal}" :style="{display: showEditMemberNotesModal ? 'block' : 'none'}">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            <i class="fas fa-sticky-note me-2 text-success"></i>
                            Á∑®ËºØÊúÉÂì°ÂÇôË®ª - {{ editNotesData.username }}
                        </h5>
                        <button type="button" class="btn-close" @click="hideEditMemberNotesModal"></button>
                    </div>
                    <div class="modal-body">
                        <form @submit.prevent="updateMemberNotes">
                            <div class="mb-3">
                                <label class="form-label">ÊúÉÂì°Ë≥áË®ä</label>
                                <div class="p-3 bg-light rounded">
                                    <div class="row">
                                        <div class="col-6">
                                            <strong>ÊúÉÂì°ID:</strong> {{ editNotesData.id }}
                                        </div>
                                        <div class="col-6">
                                            <strong>Áî®Êà∂Âêç:</strong> {{ editNotesData.username }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">ÂÇôË®ªË™™Êòé</label>
                                <textarea class="form-control" v-model="editNotesData.notes" 
                                          placeholder="Ë´ãËº∏ÂÖ•ÊúÉÂì°ÂÇôË®ªË™™Êòé" rows="5" 
                                          style="resize: vertical;"></textarea>
                                <small class="form-text text-muted">
                                    ÂèØÁî®ÊñºË®òÈåÑÊúÉÂì°ÁöÑÁâπÊÆäÊÉÖÊ≥Å„ÄÅËÅØÁπ´ÊñπÂºè„ÄÅÊäïÊ≥®ÁøíÊÖ£„ÄÅÈáçË¶ÅÊèêÈÜíÁ≠â
                                </small>
                            </div>
                            <div class="text-end">
                                <button type="button" class="btn btn-secondary me-2" @click="hideEditMemberNotesModal">ÂèñÊ∂à</button>
                                <button type="submit" class="btn btn-success" :disabled="loading">
                                    <span v-if="loading" class="spinner-border spinner-border-sm me-2" role="status"></span>
                                    <i v-else class="fas fa-save me-1"></i>
                                    {{ loading ? 'ÂÑ≤Â≠ò‰∏≠...' : 'ÂÑ≤Â≠òÂÇôË®ª' }}
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÊúÉÂì°ÈªûÊï∏ËΩâÁßª Modal -->
        <div class="modal fade" id="adjustMemberBalanceModal" tabindex="-1" aria-labelledby="adjustMemberBalanceModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="adjustMemberBalanceModalLabel">ÊúÉÂì°ÈªûÊï∏ËΩâÁßª</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form @submit.prevent="submitMemberBalanceTransfer">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">ÊÇ®ÁöÑÈ§òÈ°ç</label>
                                <input type="text" class="form-control" :value="formatMoney(user.balance)" disabled>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ÊúÉÂì°È§òÈ°ç</label>
                                <input type="text" class="form-control" :value="formatMoney(memberBalanceData.currentBalance)" disabled>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ËΩâÁßªÈ°ûÂûã</label>
                            <div class="btn-group w-100">
                                <input type="radio" class="btn-check" name="memberTransferType" id="memberDeposit" v-model="memberTransferType" value="deposit">
                                <label class="btn btn-outline-success" for="memberDeposit">Â≠òÂÖ• (ÊÇ®‚ÜíÊúÉÂì°)</label>
                                
                                <input type="radio" class="btn-check" name="memberTransferType" id="memberWithdraw" v-model="memberTransferType" value="withdraw">
                                <label class="btn btn-outline-danger" for="memberWithdraw">ÊèêÈ†ò (ÊúÉÂì°‚ÜíÊÇ®)</label>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ÈªûÊï∏ËΩâÁßªÈáëÈ°ç</label>
                            <div class="input-group">
                                <input type="number" step="0.01" class="form-control" v-model="memberTransferAmount" 
                                       placeholder="Ë´ãËº∏ÂÖ•Ë¶ÅËΩâÁßªÁöÑÈªûÊï∏ÈáëÈ°ç" min="0" required>
                                <button type="button" class="btn btn-outline-primary" @click="setMaxMemberAmount()">
                                    <i class="fas fa-coins me-1"></i>ÂÖ®ÈÉ®È§òÈ°ç
                                </button>
                                <span class="input-group-text">ÂÖÉ</span>
                            </div>
                            <small class="form-text text-muted">
                                {{ memberTransferType === 'deposit' ? 'ÈªûÊìä„ÄåÂÖ®ÈÉ®È§òÈ°ç„ÄçÂ∞áÂ°´ÂÖ•ÊÇ®ÁöÑÂÖ®ÈÉ®È§òÈ°ç' : 'ÈªûÊìä„ÄåÂÖ®ÈÉ®È§òÈ°ç„ÄçÂ∞áÂ°´ÂÖ•ÊúÉÂì°ÁöÑÂÖ®ÈÉ®È§òÈ°ç' }}
                            </small>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ËΩâÁßªÂæåÊúÉÂì°ÈªûÊï∏</label>
                            <input type="text" class="form-control" 
                                   :value="formatMoney(calculateFinalMemberBalanceTransfer())" 
                                   disabled>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ËΩâÁßªÂæåÊÇ®ÁöÑÈªûÊï∏</label>
                            <input type="text" class="form-control" 
                                   :value="formatMoney(calculateFinalAgentBalanceFromMember())" 
                                   disabled>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">ÂÇôË®ªË™™Êòé</label>
                            <textarea class="form-control" v-model="memberBalanceData.description" 
                                      placeholder="Ë´ãËº∏ÂÖ•ÈªûÊï∏ËΩâÁßªÂéüÂõ†"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                    <button type="button" class="btn btn-primary" @click="submitMemberBalanceTransfer" :disabled="!isValidMemberTransfer">
                        <i class="fas fa-check me-1"></i>Á¢∫Ë™çËΩâÁßª
                    </button>
                </div>
            </div>
        </div>
        </div>

        <!-- ‰øÆÊîπÊúÉÂì°‰ΩôÈ¢ù Modal -->
        <div class="modal fade" id="modifyMemberBalanceModal" tabindex="-1" aria-labelledby="modifyMemberBalanceModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modifyMemberBalanceModalLabel">
                            <i class="fas fa-exchange-alt me-2 text-primary"></i>
                            ‰øÆÊîπÊúÉÂì°‰ΩôÈ¢ù - {{ modifyBalanceData.memberUsername }}
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form @submit.prevent="submitModifyMemberBalance">
                            <div class="mb-3">
                                <label class="form-label">ÊúÉÂì°Ë≥áË®ä</label>
                                <div class="p-3 bg-light rounded">
                                    <div class="row">
                                        <div class="col-6">
                                            <strong>ÊúÉÂì°ID:</strong> {{ modifyBalanceData.memberId }}
                                        </div>
                                        <div class="col-6">
                                            <strong>Áî®Êà∂Âêç:</strong> {{ modifyBalanceData.memberUsername }}
                                        </div>
                                        <div class="col-12 mt-2">
                                            <strong>Áï∂Ââç‰ΩôÈ¢ù:</strong> {{ formatMoney(modifyBalanceData.currentBalance) }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">‰øÆÊîπÊñπÂºè</label>
                                <div class="btn-group w-100">
                                    <input type="radio" class="btn-check" name="modifyBalanceType" id="absolute" v-model="modifyBalanceType" value="absolute">
                                    <label class="btn btn-outline-primary" for="absolute">ÁµïÂ∞çÂÄº</label>
                                    
                                    <input type="radio" class="btn-check" name="modifyBalanceType" id="relative" v-model="modifyBalanceType" value="relative">
                                    <label class="btn btn-outline-secondary" for="relative">Áõ∏Â∞çÂÄº</label>
                                </div>
                                <small class="form-text text-muted">
                                    ÁµïÂ∞çÂÄºÔºöÁõ¥Êé•Ë®≠ÂÆöÁÇ∫ÊåáÂÆöÈáëÈ°çÔºõÁõ∏Â∞çÂÄºÔºöÂú®Áï∂Ââç‰ΩôÈ¢ùÂü∫Á§é‰∏äÂ¢ûÊ∏õ
                                </small>
                            </div>
                            
                            <div class="mb-3" v-if="modifyBalanceType === 'relative'">
                                <label class="form-label">ËÆäÂãïÊñπÂêë</label>
                                <div class="btn-group w-100">
                                    <input type="radio" class="btn-check" name="balanceChangeDirection" id="increase" v-model="balanceChangeDirection" value="increase">
                                    <label class="btn btn-outline-success" for="increase">Â¢ûÂä†</label>
                                    
                                    <input type="radio" class="btn-check" name="balanceChangeDirection" id="decrease" v-model="balanceChangeDirection" value="decrease">
                                    <label class="btn btn-outline-danger" for="decrease">Ê∏õÂ∞ë</label>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">
                                    {{ modifyBalanceType === 'absolute' ? 'Ë®≠ÂÆöÈáëÈ°ç' : 'ËÆäÂãïÈáëÈ°ç' }}
                                </label>
                                <div class="input-group">
                                    <input type="number" step="0.01" class="form-control" v-model="modifyBalanceAmount" 
                                           :placeholder="modifyBalanceType === 'absolute' ? 'Ë´ãËº∏ÂÖ•Ë¶ÅË®≠ÂÆöÁöÑÈáëÈ°ç' : 'Ë´ãËº∏ÂÖ•ËÆäÂãïÈáëÈ°ç'" 
                                           min="0" required>
                                    <span class="input-group-text">ÂÖÉ</span>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">‰øÆÊîπÂæå‰ΩôÈ¢ù</label>
                                <input type="text" class="form-control" 
                                       :value="formatMoney(calculateFinalModifiedBalance())" 
                                       disabled>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">‰øÆÊîπÂéüÂõ† <span class="text-danger">*</span></label>
                                <textarea class="form-control" v-model="modifyBalanceData.reason" 
                                          placeholder="Ë´ãËº∏ÂÖ•‰øÆÊîπ‰ΩôÈ¢ùÁöÑÂéüÂõ†" rows="3" required></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                        <button type="button" class="btn btn-primary" @click="submitModifyMemberBalance" 
                                :disabled="!modifyBalanceAmount || !modifyBalanceData.reason || loading">
                            <span v-if="loading" class="spinner-border spinner-border-sm me-2" role="status"></span>
                            <i class="fas fa-check me-1" v-if="!loading"></i>
                            Á¢∫Ë™ç‰øÆÊîπ
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ë™øÊï¥ÊúÉÂì°ÈôêÁ¥Ö Modal - ‰ΩøÁî®v-ifÊéßÂà∂È°ØÁ§∫ -->
        <div v-if="showBettingLimitModal && isLoggedIn && user && user.id && modalSystemReady" 
             class="modal d-block" id="adjustBettingLimitModal" tabindex="-1" 
             style="background-color: rgba(0,0,0,0.5);">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">
                            <i class="fas fa-sliders-h me-2"></i>Ë™øÊï¥ÊúÉÂì°ÈôêÁ¥Ö
                        </h5>
                        <button type="button" class="btn-close" @click="hideBettingLimitModal"></button>
                    </div>
                    <div class="modal-body">
                        <!-- ËºâÂÖ•ÁãÄÊÖã -->
                        <div v-if="bettingLimitData.loading" class="text-center p-4">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">ËºâÂÖ•‰∏≠...</span>
                            </div>
                            <p class="mt-2">ËºâÂÖ•ÈôêÁ¥ÖÈÖçÁΩÆ‰∏≠...</p>
                        </div>
                        
                        <!-- ‰∏ªË¶ÅÂÖßÂÆπ -->
                        <div v-else>
                            <!-- ÊúÉÂì°‰ø°ÊÅØ -->
                            <div class="alert alert-info">
                                <h6><i class="fas fa-user me-2"></i>ÊúÉÂì°‰ø°ÊÅØ</h6>
                                <p class="mb-1"><strong>Áî®Êà∂Âêç:</strong> {{ bettingLimitData.member.username }}</p>
                                <p class="mb-1"><strong>Áï∂ÂâçÈôêÁ¥ÖÁ≠âÁ¥ö:</strong> 
                                    <span class="badge bg-secondary">{{ bettingLimitData.member.levelDisplayName }}</span>
                                </p>
                                <p class="mb-0"><strong>Ë™™Êòé:</strong> {{ bettingLimitData.member.description }}</p>
                            </div>

                            <!-- ÈôêÁ¥ÖÁ≠âÁ¥öÈÅ∏Êìá -->
                            <div class="mb-3">
                                <label class="form-label fw-bold">ÈÅ∏ÊìáÊñ∞ÁöÑÈôêÁ¥ÖÁ≠âÁ¥ö</label>
                                <select class="form-select" v-model="bettingLimitData.newLimitLevel">
                                    <option value="">Ë´ãÈÅ∏ÊìáÈôêÁ¥ÖÁ≠âÁ¥ö</option>
                                    <option v-for="config in bettingLimitData.configs" 
                                            :key="config.level_name" 
                                            :value="config.level_name">
                                        {{ config.level_display_name }} - {{ config.description }}
                                    </option>
                                </select>
                            </div>

                            <!-- ÈôêÁ¥ÖÈÖçÁΩÆÈ†êË¶Ω -->
                            <div v-if="bettingLimitData.newLimitLevel" class="mb-3">
                                <h6><i class="fas fa-eye me-2"></i>ÈôêÁ¥ÖÈÖçÁΩÆÈ†êË¶Ω</h6>
                                <div class="table-responsive">
                                    <table class="table table-sm table-bordered">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Áé©Ê≥ï</th>
                                                <th>ÂñÆÊ≥®ÊúÄÈ´ò</th>
                                                <th>ÂñÆÊúüÈôêÈ°ç</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="(config, key) in selectedLimitConfig" :key="key">
                                                <td>{{ formatBetTypeName(key) }}</td>
                                                <td class="text-success fw-bold">{{ formatMoney(config.maxBet) }}</td>
                                                <td class="text-primary fw-bold">{{ formatMoney(config.periodLimit) }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="alert alert-warning">
                                    <small>
                                        <i class="fas fa-info-circle me-1"></i>
                                        <strong>Ê≥®ÊÑè‰∫ãÈ†ÖÔºö</strong><br>
                                        ‚Ä¢ ÂñÆÊ≥®ÊúÄÈ´òÔºöÊØèÁ≠ÜÊäïÊ≥®ÁöÑÊúÄÈ´òÈáëÈ°çÈôêÂà∂<br>
                                        ‚Ä¢ ÂñÆÊúüÈôêÈ°çÔºöÊØèÂÄãÈñãÁçéÊúüÂêåÈ°ûÂûãÊäïÊ≥®ÁöÑÁ¥ØË®àÈôêÈ°ç<br>
                                        ‚Ä¢ ÊúÄ‰ΩéÊäïÊ≥®ÈáëÈ°çÁµ±‰∏ÄÁÇ∫1ÂÖÉ<br>
                                        ‚Ä¢ Ë∂ÖÈÅéÈôêÈ°çÁöÑÊäïÊ≥®Â∞áË¢´Á≥ªÁµ±ÊãíÁµï
                                    </small>
                                </div>
                            </div>

                            <!-- Ë™øÊï¥ÂéüÂõ† -->
                            <div class="mb-3">
                                <label class="form-label fw-bold">Ë™øÊï¥ÂéüÂõ†</label>
                                <textarea class="form-control" 
                                          v-model="bettingLimitData.reason" 
                                          rows="3" 
                                          placeholder="Ë´ãËº∏ÂÖ•Ë™øÊï¥ÈôêÁ¥ÖÁöÑÂéüÂõ†ÔºàÂèØÈÅ∏Ôºâ"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" @click="hideBettingLimitModal">ÂèñÊ∂à</button>
                        <button type="button" 
                                class="btn btn-primary" 
                                @click="submitBettingLimitAdjustment()"
                                :disabled="!bettingLimitData.newLimitLevel || bettingLimitData.submitting">
                            <span v-if="bettingLimitData.submitting" class="spinner-border spinner-border-sm me-2"></span>
                            Á¢∫Ë™çË™øÊï¥
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊúÉÂì°Ê≥®ÂñÆË©≥ÊÉÖModal -->
    <div class="modal fade" id="memberBetDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-list-alt me-2"></i>{{ memberBetDetails.memberUsername }} - Ê≥®ÂñÆË©≥ÊÉÖ
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- ÁØ©ÈÅ∏Ê¢ù‰ª∂ -->
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">ÈñãÂßãÊó•Êúü</label>
                            <input type="date" class="form-control" v-model="memberBetDetails.startDate">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">ÁµêÊùüÊó•Êúü</label>
                            <input type="date" class="form-control" v-model="memberBetDetails.endDate">
                        </div>
                        <div class="col-md-4 d-flex align-items-end">
                            <button class="btn btn-primary me-2" @click="loadMemberBetDetails">
                                <i class="fas fa-search me-1"></i>Êü•Ë©¢
                            </button>
                            <button class="btn btn-outline-secondary" @click="refreshMemberBetDetails">
                                <i class="fas fa-sync me-1"></i>Âà∑Êñ∞
                            </button>
                        </div>
                    </div>

                    <!-- Ê≥®ÂñÆÂàóË°® -->
                    <div class="table-responsive">
                        <table class="table table-striped table-sm">
                            <thead>
                                <tr>
                                    <th style="width: 120px;">ÂñÆËôü</th>
                                    <th style="width: 130px;">ÊäïÊ≥®ÊôÇÈñì</th>
                                    <th>ÈÅäÊà≤</th>
                                    <th>Áî®Êà∂Âêç</th>
                                    <th>ÊäïÊ≥®ÂÖßÂÆπ</th>
                                    <th style="width: 80px;">‰∏ãÊ≥®ÈáëÈ°ç</th>
                                    <th style="width: 60px;">ÈÄÄÊ∞¥</th>
                                    <th style="width: 80px;">‰∏ãÊ≥®ÁµêÊûú</th>
                                    <th style="width: 80px;">Êú¨Á¥ö‰ΩîÊàê</th>
                                    <th style="width: 80px;">Êú¨Á¥öÁµêÊûú</th>
                                    <th style="width: 100px;">‰ΩîÊàêÊòéÁ¥∞</th>
                                    <th style="width: 100px;">Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="bet in memberBetDetails.bets" :key="bet.id">
                                    <td class="text-monospace small">{{ bet.period }}{{ String(bet.id).padStart(3, '0') }}</td>
                                    <td class="small">{{ formatBetTime(bet.created_at) }}</td>
                                    <td class="small">Ê≥¢Â†¥Ë≥ΩËªä(1ÂàÜ)<br>{{ bet.period }}Êúü</td>
                                    <td class="fw-bold">{{ bet.username }}</td>
                                    <td>
                                        <div class="small">
                                            {{ bet.market_type }}Áõ§<br>
                                            {{ formatBetContent(bet) }}<br>
                                            <span class="text-muted">@ {{ bet.odds }}</span>
                                        </div>
                                    </td>
                                    <td class="text-end">{{ formatMoney(bet.amount) }}</td>
                                    <td class="text-center">{{ (bet.rebate_percentage * 100).toFixed(1) }}%</td>
                                    <td class="text-end" :class="bet.win ? 'text-success' : 'text-danger'">
                                        {{ bet.win ? '+' + formatMoney(bet.win_amount - bet.amount) : '-' + formatMoney(bet.amount) }}
                                    </td>
                                    <td class="text-center">{{ bet.commission_percentage || '0' }}%</td>
                                    <td class="text-end">{{ formatMoney(bet.commission_amount || 0) }}</td>
                                    <td class="text-center">
                                        <button class="btn btn-sm btn-outline-info" @click="showCommissionDetails(bet)">
                                            ÊòéÁ¥∞
                                        </button>
                                    </td>
                                    <td class="text-center">
                                        <button class="btn btn-sm btn-outline-success" @click="showDrawResult(bet.period)">
                                            ÈñãÁçéÁµêÊûú
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Á©∫ÁãÄÊÖã -->
                    <div v-if="memberBetDetails.bets.length === 0" class="text-center py-5">
                        <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
                        <p class="text-muted">Êö´ÁÑ°Ê≥®ÂñÆË®òÈåÑ</p>
                    </div>

                    <!-- ÂàÜÈ†Å -->
                    <nav v-if="memberBetDetails.totalPages > 1">
                        <ul class="pagination justify-content-center">
                            <li class="page-item" :class="{disabled: memberBetDetails.currentPage === 1}">
                                <a class="page-link" href="#" @click.prevent="changeMemberBetPage(memberBetDetails.currentPage - 1)">‰∏ä‰∏ÄÈ†Å</a>
                            </li>
                            <li class="page-item" v-for="page in getMemberBetPageRange()" :key="page" :class="{active: page === memberBetDetails.currentPage}">
                                <a class="page-link" href="#" @click.prevent="changeMemberBetPage(page)">{{ page }}</a>
                            </li>
                            <li class="page-item" :class="{disabled: memberBetDetails.currentPage === memberBetDetails.totalPages}">
                                <a class="page-link" href="#" @click.prevent="changeMemberBetPage(memberBetDetails.currentPage + 1)">‰∏ã‰∏ÄÈ†Å</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- ‰ΩîÊàêÊòéÁ¥∞Modal -->
    <div class="modal fade" id="commissionDetailsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">‰ΩîÊàêÊòéÁ¥∞</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>È°ûÂûã</th>
                                    <th>Áî®Êà∂Âêç</th>
                                    <th>‰ΩîÊàê</th>
                                    <th>ÈÄÄÊ∞¥</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="detail in commissionDetails" :key="detail.id">
                                    <td>{{ detail.level_name }}</td>
                                    <td>{{ detail.username }}</td>
                                    <td class="text-end">{{ detail.commission_percentage }}%</td>
                                    <td class="text-end">{{ detail.rebate_percentage }}%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÈñãÁçéÁµêÊûúModal -->
    <div class="modal fade" id="drawResultModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ÈñãÁçéÁµêÊûú</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <h6 class="mb-3">ÊúüËôüÔºö{{ drawResult.period }}</h6>
                    <div class="draw-balls-container d-flex justify-content-center flex-wrap gap-2">
                        <div v-for="(number, index) in drawResult.numbers" :key="index" class="text-center">
                            <div class="small text-muted mb-1">Á¨¨{{ getPositionName(index + 1) }}Âêç</div>
                            <div class="number-ball mx-auto" :class="'color-' + number" style="width: 50px; height: 50px; line-height: 50px; border-radius: 50%; color: white; font-weight: bold;">{{ number }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂÆ¢ÊúçÂ≠òÊ¨æ/ÊèêÊ¨æÊìç‰Ωú Modal -->
    <div class="modal fade" id="csOperationModal" tabindex="-1" aria-labelledby="csOperationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="csOperationModalLabel">ÂÆ¢ÊúçÂ≠òÊ¨æ/ÊèêÊ¨æÊìç‰Ωú</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="csOperationForm">
                        <!-- Êìç‰ΩúÂ∞çË±° -->
                        <div class="mb-3">
                            <label class="form-label">Êìç‰ΩúÂ∞çË±°</label>
                            <div class="btn-group w-100">
                                <input type="radio" class="btn-check" name="csOperationTarget" id="csTargetAgent" value="agent">
                                <label class="btn btn-outline-primary" for="csTargetAgent">‰ª£ÁêÜ</label>
                                
                                <input type="radio" class="btn-check" name="csOperationTarget" id="csTargetMember" value="member">
                                <label class="btn btn-outline-info" for="csTargetMember">‰ºöÂëò</label>
                            </div>
                        </div>
                        
                        <!-- ÈÄâÊã©‰ª£ÁêÜ -->
                        <div class="mb-3" id="agentSelectDiv" style="display: none;">
                            <label class="form-label">ÈÄâÊã©‰ª£ÁêÜ</label>
                            <select id="agentSelect" class="form-select" required>
                                <option value="">ËØ∑ÈÄâÊã©‰ª£ÁêÜ</option>
                            </select>
                        </div>
                        
                        <!-- ÈÄâÊã©‰ºöÂëò -->
                        <div class="mb-3" id="memberSelectDiv" style="display: none;">
                            <label class="form-label">ÈÄâÊã©‰ºöÂëò</label>
                            <select id="memberSelect" class="form-select" required>
                                <option value="">ËØ∑ÈÄâÊã©‰ºöÂëò</option>
                            </select>
                        </div>
                        
                        <!-- ÂΩìÂâç‰ΩôÈ¢ùÈ°ØÁ§∫ -->
                        <div class="row mb-3" id="currentBalanceDiv" style="display: none;">
                            <div class="col-md-12">
                                <label class="form-label">ÂΩìÂâç‰ΩôÈ¢ù</label>
                                <input id="currentBalanceInput" type="text" class="form-control" disabled>
                            </div>
                        </div>
                        
                        <!-- Êìç‰ΩúÈ°ûÂûã -->
                        <div class="mb-3" id="operationTypeDiv" style="display: none;">
                            <label class="form-label">Êìç‰ΩúÈ°ûÂûã</label>
                            <div class="btn-group w-100">
                                <input type="radio" class="btn-check" name="csTransferType" id="csDeposit" value="deposit">
                                <label class="btn btn-outline-success" for="csDeposit">Â≠òÊ¨æ</label>
                                
                                <input type="radio" class="btn-check" name="csTransferType" id="csWithdraw" value="withdraw">
                                <label class="btn btn-outline-danger" for="csWithdraw">ÊèêÊ¨æ</label>
                            </div>
                        </div>
                        
                        <!-- Êìç‰ΩúÈáëÈ¢ù -->
                        <div class="mb-3" id="amountDiv" style="display: none;">
                            <label class="form-label">Êìç‰ΩúÈáëÈ¢ù</label>
                            <div class="input-group">
                                <input type="number" step="0.01" class="form-control" id="amountInput"
                                       placeholder="ËØ∑ËæìÂÖ•Êìç‰ΩúÈáëÈ¢ù" min="0" required>
                                <span class="input-group-text">ÂÖÉ</span>
                            </div>
                        </div>
                        
                        <!-- Êìç‰ΩúÂæå‰ΩôÈ¢ùÈ†êË¶Ω -->
                        <div class="mb-3" id="finalBalanceDiv" style="display: none;">
                            <label class="form-label">Êìç‰ΩúÂæå‰ΩôÈ¢ù</label>
                            <input id="finalBalanceInput" type="text" class="form-control" disabled>
                        </div>
                        
                        <!-- Êìç‰ΩúËØ¥Êòé -->
                        <div class="mb-3">
                            <label class="form-label">Êìç‰ΩúËØ¥Êòé</label>
                            <textarea class="form-control" id="csOperationDescription"
                                      placeholder="ËØ∑ËæìÂÖ•Êìç‰ΩúËØ¥ÊòéÔºàÂèØÈÅ∏Ôºâ" rows="3"></textarea>
                        </div>
                        
                        <div class="text-end">
                            <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">ÂèñÊ∂à</button>
                            <button type="button" class="btn btn-primary" id="csOperationSubmitBtn">
                                <span id="csOperationSpinner" class="spinner-border spinner-border-sm" role="status" style="display: none;"></span>
                                Á°ÆËÆ§Êìç‰Ωú
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        async function updateProfile() {
            console.log('ÂºÄÂßãÊõ¥Êñ∞‰∏™‰∫∫ËµÑÊñô...');
            this.profileLoading = true;
            try {
                console.log('ÂáÜÂ§áÈÄÅÂá∫ axios ËØ∑Ê±Ç');
                const response = await axios.post(/* ... */);
                console.log('Êî∂Âà∞APIÂõûÊáâ:', response.data);
                if (response.data.success) {
                    console.log('APIÊàêÂäüÔºåÂáÜÂ§áÂÖ≥Èó≠modal');
                } else {
                    console.log('APIÂ§±Ë¥•:', response.data.message);
                }
            } catch (error) {
                console.error('catch error:', error);
            } finally {
                console.log('finally: profileLoading Ë®≠ÁÇ∫ false');
                this.profileLoading = false;
            }
        }
    </script>
</body>
</html>