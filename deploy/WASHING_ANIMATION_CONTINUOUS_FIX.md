# 洗球动画持续播放修复

## 问题描述
用户反映开奖中倒数结束时会先卡几秒在0秒显示旧的球号，等到封盘倒计时开始时，又会刷新才有新的开奖球号。

## 根本原因
原本的逻辑在开奖倒数结束时（从 drawing 状态转换到 betting 状态）会立即停止洗球动画，但此时新的开奖结果可能还没准备好，导致显示旧的球号。

## 解决方案
修改 `completeDrawingProcess()` 函数的逻辑：

### 修改前：
- 立即停止洗球动画
- 如果有缓存结果就使用缓存
- 如果没有才从 API 获取

### 修改后：
- **继续播放洗球动画**，不立即停止
- 同时从 API 获取最新结果
- 只有在获取到新结果后才停止动画并显示
- 如果暂时无法获取结果，会自动重试（最多10次）

## 技术实现
```javascript
// 修改后的 completeDrawingProcess
completeDrawingProcess() {
    // ... 前置检查 ...
    
    // 继续播放洗球动画，直到获取到新结果
    console.log('📊 继续洗球动画，同时获取最新开奖结果...');
    
    this.getLatestResultFromHistory().then((latestResult) => {
        if (latestResult && latestResult.length === 10) {
            // 现在才停止动画并显示新结果
            this.stopWashingAnimation();
        } else {
            // 继续尝试获取结果
            setTimeout(() => {
                this.retryGetResult();
            }, 1000);
        }
    });
}
```

## 新增功能
1. **retryGetResult()** - 重试机制，确保最终能获取到结果
2. **持续动画** - 洗球动画会持续播放直到新结果准备好
3. **智能重试** - 最多重试10次，每次间隔1秒

## 效果
- 开奖倒数结束后，洗球动画会继续播放
- 不会出现显示旧球号的空档期
- 当新的开奖结果准备好时，动画才会停止并立即显示新结果
- 提升用户体验，避免视觉上的不连续性

## 测试建议
1. 观察开奖倒计时从 1 秒到 0 秒的转换
2. 确认洗球动画持续播放，没有中断
3. 确认新球号在动画停止时立即显示，没有旧球号闪现