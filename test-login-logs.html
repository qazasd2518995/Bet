<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登錄日誌顯示測試</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app" class="container mt-4">
        <h2>登錄日誌顯示測試 - 修復前後對比</h2>
        
        <div class="row">
            <div class="col-md-6">
                <h4>修復前（問題展示）</h4>
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th style="width: 80px;">NO.</th>
                            <th style="width: 150px;">用戶名</th>
                            <th style="width: 180px;">登錄時間</th>
                            <th style="width: 150px;">IP</th>
                            <th>IP歸屬地</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="(log, index) in testLogs" :key="log.id">
                            <td>{{ index + 1 }}</td>
                            <td><strong>{{ log.username }}</strong></td>
                            <td>{{ log.login_time }}</td>
                            <td><span class="font-monospace">{{ log.ip_address }}</span></td>
                            <td>{{ log.ip_location }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="col-md-6">
                <h4>修復後（清晰顯示）</h4>
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th style="width: 80px; color: white; font-weight: bold;">NO.</th>
                            <th style="width: 150px; color: white; font-weight: bold;">用戶名</th>
                            <th style="width: 180px; color: white; font-weight: bold;">登錄時間</th>
                            <th style="width: 150px; color: white; font-weight: bold;">IP</th>
                            <th style="color: white; font-weight: bold;">IP歸屬地</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="(log, index) in testLogs" :key="log.id">
                            <td>{{ index + 1 }}</td>
                            <td><strong>{{ log.username }}</strong></td>
                            <td>{{ log.login_time }}</td>
                            <td><span class="font-monospace">{{ formatIPAddress(log.ip_address) }}</span></td>
                            <td>{{ log.ip_location }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="alert alert-success mt-4">
            <h5>修復內容：</h5>
            <ul>
                <li><strong>表頭樣式</strong>：添加 <code>color: white; font-weight: bold;</code> 確保文字清晰可見</li>
                <li><strong>IP地址格式化</strong>：<code>formatIPAddress()</code> 函數移除 <code>::ffff:</code> 前綴</li>
                <li><strong>顯示效果</strong>：<code>::ffff:192.168.1.100</code> → <code>192.168.1.100</code></li>
            </ul>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    testLogs: [
                        {
                            id: 1,
                            username: 'ti2025',
                            login_time: '2025/06/27 12:16:14',
                            ip_address: '::ffff:10.220.216.28',
                            ip_location: '台灣省'
                        },
                        {
                            id: 2,
                            username: 'ti2025',
                            login_time: '2025/06/27 12:15:30',
                            ip_address: '::ffff:192.168.1.100',
                            ip_location: '內網IP測試'
                        },
                        {
                            id: 3,
                            username: 'ti2025',
                            login_time: '2025/06/27 12:14:45',
                            ip_address: '123.193.88.143',
                            ip_location: '台湾省台北市 亚太电信集团公司'
                        },
                        {
                            id: 4,
                            username: 'ti2025',
                            login_time: '2025/06/27 12:13:12',
                            ip_address: '::1',
                            ip_location: '本地開發環境'
                        }
                    ]
                };
            },
            methods: {
                formatIPAddress(ipAddress) {
                    if (!ipAddress) return '-';
                    // 移除IPv6映射的前綴 ::ffff:
                    return ipAddress.replace(/^::ffff:/i, '');
                }
            }
        }).mount('#app');
    </script>
</body>
</html> 